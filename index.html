<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>코드명: 에그 노이즈 - 필드 로그</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>
    /* CSS 변수 및 기본 설정 */
    :root {
      --bg-gray: #111827;
      --paper: #faf7f2;
      --line: #e2ddd4;
      --margin-line: #c4a58c;
      --margin-line-new: #b8987b;
      --text-main: #222222;
      --text-sub: #6b7280;
      --accent: #111111;
      --accent-blue: #2563eb;
      --highlight-yellow: #fde047;
      --highlight-text: #854d0e;
      --survey-bg: #FFD94D;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      min-height: 100vh;
      background: var(--bg-gray);
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    /* ========================================================= */
    /* [스타일 추가됨] 텍스트 강조 및 특수 효과 (여기서부터) */
    /* ========================================================= */
    
    /* 1. 굵은 강조 (strong 태그) */
    .story-text strong, .story-text b {
      font-weight: 700;
      color: #000;
      background: rgba(0, 0, 0, 0.05); /* 살짝 음영 */
      padding: 0 2px;
      border-radius: 2px;
    }

    /* 2. 붉은색 (경고/위험) 사용법: <span class="txt-red">내용</span> */
    .txt-red {
      color: #d32f2f;
      font-weight: 700;
    }

    /* 3. 푸른색 (시스템/정보) 사용법: <span class="txt-blue">내용</span> */
    .txt-blue {
      color: #2563eb;
      font-weight: 700;
    }

    /* 4. 형광펜 효과 (단서/중요) 사용법: <span class="txt-highlight">내용</span> */
    .txt-highlight {
      background: linear-gradient(120deg, rgba(253, 224, 71, 0.6) 0%, rgba(253, 224, 71, 0.2) 100%);
      box-shadow: 0 1px 0 rgba(133, 77, 14, 0.2);
      padding: 0 2px;
      border-radius: 2px;
      font-weight: 600;
      color: #5d4037;
    }

    /* 5. 글리치(지지직) 애니메이션 */
    /* 사용법: <span class="txt-glitch">오류난텍스트</span> */
    @keyframes glitch-anim {
      0% { transform: translate(0); opacity: 1; }
      20% { transform: translate(-2px, 1px); opacity: 0.8; }
      40% { transform: translate(-1px, -1px); opacity: 0.9; }
      60% { transform: translate(2px, 0px); opacity: 0.8; }
      80% { transform: translate(1px, -2px); opacity: 1; }
      100% { transform: translate(0); opacity: 1; }
    }
    .txt-glitch {
      display: inline-block;
      color: #2563eb;
      font-weight: 800;
      animation: glitch-anim 0.25s infinite;
      letter-spacing: 0.1em;
    }

    /* 6. 네온 글로우(빛나는) 효과 */
    /* 사용법: <span class="txt-glow">빛나는텍스트</span> */
    @keyframes neon-pulse {
      0% {
        text-shadow: 0 0 4px rgba(37, 99, 235, 0.6), 0 0 10px rgba(37, 99, 235, 0.4);
        opacity: 0.9;
      }
      100% {
        text-shadow: 0 0 4px rgba(59, 130, 246, 1), 0 0 15px rgba(37, 99, 235, 0.8), 0 0 30px rgba(29, 78, 216, 0.6);
        opacity: 1;
      }
    }
    .txt-glow {
      color: #eff6ff; /* 글자 중심은 흰색에 가까운 파랑 */
      font-weight: 800;
      animation: neon-pulse 1.5s ease-in-out infinite alternate;
      /* 배경이 밝을 경우 잘 안 보일 수 있으니 배경색을 살짝 어둡게 깔아줌 */
      background-color: rgba(17, 24, 39, 0.8); 
      padding: 0 4px;
      border-radius: 4px;
    }

    /* ========================================================= */
    /* [스타일 추가 끝] */
    /* ========================================================= */

    /* 전체 노트 프레임 */
    .notebook-card {
      width: 100%;
      max-width: 600px;
      margin: 0 auto;
      min-height: 100vh;
      background: #020617;
      display: flex;
      flex-direction: column;
    }

    /* 스프링 헤더 */
    .spiral-header {
      padding: 12px 16px 8px;
      background: linear-gradient(135deg, #020617, #111827);
      color: #e5e7eb;
      box-shadow: 0 2px 6px rgba(0,0,0,0.5);
    }

    .spiral-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 6px;
    }

    .spiral-holes { display: flex; gap: 6px; }
    .spiral-hole {
      width: 13px; height: 13px; border-radius: 999px;
      background: #020617;
      box-shadow: 0 0 0 2px #d4d4d4, inset 0 0 3px rgba(0,0,0,0.9);
      position: relative;
    }
    .spiral-wire {
      position: absolute; left: 50%; transform: translateX(-50%);
      width: 19px; height: 3px; border-radius: 999px;
      background: #d4d4d4;
      box-shadow: 0 2px 0 rgba(0,0,0,0.4), 0 -1px 0 rgba(255,255,255,0.7);
    }
    .spiral-wire.top { top: -6px; }
    .spiral-wire.bottom { bottom: -6px; }

    .lab-header-text {
      text-align: right; font-size: 0.72rem; letter-spacing: 0.16em;
      text-transform: uppercase; color: #9ca3af;
    }
    .lab-main-title {
      margin-top: 4px; font-size: 1.05rem; font-weight: 600;
      letter-spacing: 0.18em; text-transform: uppercase;
    }
    .lab-subtitle {
      margin-top: 2px; font-size: 0.78rem; letter-spacing: 0.22em;
      text-transform: uppercase; color: #d1d5db;
    }

    /* 종이 영역 */
    .paper-wrap {
      flex: 1; background: #111827; padding: 10px 16px 16px; overflow-y: auto;
    }
    .paper {
      position: relative; border-radius: 14px;
      background: repeating-linear-gradient(to bottom, var(--paper) 0, var(--paper) 24px, var(--line) 25px);
      box-shadow: 0 8px 18px rgba(0,0,0,0.45), 0 0 0 1px rgba(0,0,0,0.25);
      padding: 18px 18px 18px 40px;
      min-height: calc(100vh - 110px);
    }
    .paper::before {
      content: ""; position: absolute; top: 0; bottom: 0; left: 28px; width: 2px;
      background: linear-gradient(to bottom, transparent, var(--margin-line-new), transparent); opacity: 0.9;
    }

    .paper-header { display: flex; justify-content: space-between; align-items: baseline; margin-bottom: 6px; }
    .paper-label { font-size: 0.8rem; color: var(--text-sub); letter-spacing: 0.16em; text-transform: uppercase; }
    .paper-title { font-size: 1.05rem; font-weight: 600; color: var(--text-main); }
    .stage-pill {
      display: inline-flex; align-items: center; gap: 4px; padding: 1px 6px;
      border-radius: 999px; border: 1px solid #c4b5a5; font-size: 0.65rem;
      background: rgba(250, 247, 242, 0.95); color: var(--text-sub);
      text-transform: uppercase; letter-spacing: 0.1em;
    }
    .progress-wrap { margin: 4px 0 4px; }
    
    .subtitle { font-size: 0.86rem; color: var(--text-sub); margin: 4px 0 6px; }
    .subtitle-separator { width: 100%; height: 1px; background: #e2ddd4; margin: 8px 0 12px; opacity: 0.6; }

    /* 본문 텍스트 스타일 */
    .story-text {
      font-size: 0.95rem; color: var(--text-main);
      white-space: pre-line; line-height: 1.75; margin-bottom: 14px;
    }

    /* 정답 입력 영역 */
    .answer-label-pill {
      display: inline-block; padding: 4px 10px; border-radius: 8px;
      background: var(--text-main); color: var(--paper); font-size: 0.86rem;
      font-weight: 600; letter-spacing: 0.1em; margin-bottom: 4px; margin-top: 4px;
    }
    label { display: none; }
    input[type="text"], input[type="tel"] {
      width: 100%; padding: 8px 10px; border-radius: 8px; border: 1px solid #c4b5a5;
      font-size: 0.95rem; font-family: inherit; background: rgba(255,255,255,0.98); color: var(--text-main);
    }
    input:focus { outline: none; border-color: var(--accent-blue); box-shadow: 0 0 0 1px rgba(37, 99, 235, 0.5); background: #ffffff; }

    button {
      width: 100%; margin-top: 8px; padding: 9px 10px; border-radius: 999px;
      border: none; background: var(--accent); color: #ffffff;
      font-size: 0.82rem; font-weight: 600; letter-spacing: 0.18em;
      text-transform: uppercase; cursor: pointer;
      box-shadow: 0 7px 16px rgba(0,0,0,0.35);
      transition: transform 0.05s ease, filter 0.06s ease;
    }
    button:active { transform: translateY(1px); filter: brightness(0.93); }
    button:disabled { opacity: 0.5; cursor: default; }

    .message { margin-top: 4px; font-size: 0.82rem; min-height: 1.2em; }
    .message.error { color: #c62828; }
    .message.success { color: #2e7d32; font-size: 1.2rem; font-weight: 700; padding: 8px 0; text-align: center; background-color: #e6ffe6; border-radius: 8px; }

    /* 힌트 영역 */
    .hint-area { margin-top: 8px; }
    .hint-area details {
      border: 1px solid #c4b5a5; border-radius: 8px; background: rgba(255, 255, 255, 0.5);
      overflow: hidden; margin-top: 8px; color: var(--text-main);
    }
    .hint-area summary {
      padding: 8px 10px; font-size: 0.82rem; font-weight: 600; cursor: pointer; list-style: none;
    }
    .hint-area summary:focus { outline: none; background: rgba(255, 255, 255, 0.8); }
    .hint-area summary::before {
      content: "▶"; display: inline-block; font-size: 0.7rem; margin-right: 8px; transition: transform 0.1s ease;
    }
    .hint-area details[open] summary::before { transform: rotate(90deg); }
    .hint-content {
      padding: 8px 10px; font-size: 0.8rem; background: var(--paper); border-top: 1px solid #e2ddd4; white-space: pre-line;
    }
    .hint-area.active details { border-color: var(--highlight-text); box-shadow: 0 0 5px rgba(253, 224, 71, 0.7); }
    .hint-area.active summary { background: var(--highlight-yellow); color: var(--highlight-text); }

    /* 클리어 화면 */
    .clear-block { margin-top: 60px; text-align: center; display: none; }
    .clear-badge {
      display: inline-flex; align-items: center; gap: 6px; padding: 4px 12px;
      border-radius: 999px; border: 2px solid #2e7d32; color: #2e7d32;
      font-size: 0.85rem; font-weight: 700; text-transform: uppercase;
      letter-spacing: 0.16em; background: rgba(222, 247, 222, 0.9); margin-bottom: 12px;
    }
    .clear-title { font-size: 1.4rem; font-weight: 800; margin-bottom: 8px; color: #111; }
    .clear-text { font-size: 0.95rem; color: var(--text-sub); line-height: 1.6; margin-bottom: 30px; }
    
    .survey-btn-wrap {
      margin: 20px 0; padding: 20px 0;
      border-top: 2px dashed #c4a58c; border-bottom: 2px dashed #c4a58c;
    }
    .survey-btn {
      padding: 16px 10px; border-radius: 12px; border: none;
      background: var(--survey-bg); color: var(--highlight-text);
      font-size: 1rem; font-weight: 800; letter-spacing: 0.1em;
      text-transform: uppercase; cursor: pointer;
      box-shadow: 0 5px 15px rgba(253, 224, 71, 0.4);
    }
    .restart-btn {
      margin-top: 20px; width: 100%; padding: 12px 10px; border-radius: 999px;
      border: 1px solid #111827; background: transparent; color: #111827;
      font-size: 0.85rem; text-transform: uppercase; letter-spacing: 0.16em; cursor: pointer; box-shadow: none;
    }
  </style>
</head>
<body>
  <div class="notebook-card">
    <div class="spiral-header">
      <div class="spiral-row">
        <div class="spiral-holes">
          <div class="spiral-hole"><div class="spiral-wire top"></div><div class="spiral-wire bottom"></div></div>
          <div class="spiral-hole"><div class="spiral-wire top"></div><div class="spiral-wire bottom"></div></div>
          <div class="spiral-hole"><div class="spiral-wire top"></div><div class="spiral-wire bottom"></div></div>
        </div>
        <div class="lab-header-text">BACKWOODS RESEARCH INSTITUTE</div>
      </div>
      <div class="lab-main-title">CODE: EGG NOISE</div>
      <div class="lab-subtitle">GANGCHON BASE</div>
    </div>

    <div class="paper-wrap">
      <div class="paper">
        <div class="paper-header">
          <div class="paper-header-left">
            <div class="paper-label">FIELD NOTES</div>
            <div class="paper-title">코드명: 에그 노이즈 <br> (Code: Egg Noise)</div>
          </div>
          <div class="paper-header-right">
            <div class="stage-pill" id="stageLabel">STAGE 1 / 19</div>
          </div>
        </div>

        <div class="progress-wrap">
          <div class="progress-bar-bg" style="display: none;"></div>
        </div>

        <div id="gameContent">
            <div class="subtitle" id="stageSubtitle">
            힌트를 읽고 현장에서 얻은 코드를 입력하세요.
            </div>
            <div class="subtitle-separator"></div>

            <div class="story-text" id="storyText">
            스테이지 내용 로딩 중...
            </div>

            <div id="answerArea">
                <div class="answer-label-pill">CODE / 정답</div>
                <label for="answerInput">CODE / 정답</label>
                <input id="answerInput" type="text" inputmode="text" autocomplete="off" />
                <button id="submitBtn">SUBMIT</button>
                <div id="message" class="message"></div>

                <div id="hintArea" class="hint-area">
                    <details>
                        <summary id="hintSummary">힌트 보기</summary>
                        <div class="hint-content" id="hintContent"></div>
                    </details>
                </div>
            </div>
        </div>
        <div class="clear-block" id="clearBlock">
          <div class="clear-badge"><span>🎉</span><span>ALL STAGES CLEARED</span></div>
          <div class="clear-title">필드 로그 작성 완료</div>
          <div class="clear-text">모든 스테이지에서 수집한 코드가 기록되었습니다.<br />수고 많으셨습니다.</div>

          <div class="survey-btn-wrap">
            <a href="https://forms.gle/y1YVeoTPLMm19ugSA" target="_blank" style="text-decoration: none;">
              <button class="survey-btn">💡 만족도 조사 참여하기 💡</button>
            </a>
          </div>
          <button class="restart-btn" id="restartBtn">다시 시작하기</button>
        </div>

      </div>
    </div>
  </div>

  <script>
const puzzles = [
  {
    subtitle: "프롤로그. 사라진 시대의 잔향",
    text: `<strong>📖 고대 생명체가 잠든 땅</strong><br>
강촌의 험준한 <span class="txt-blue">능선</span>과 굽이치는 <span class="txt-blue">강물</span>.<br>
아주 오래전, 이곳에는 지금은 기록에서 사라진 <span class="txt-red">거대 비행 생명체</span>가 존재했다는 전설이 있다.<br>
그것은 죽은 것이 아니라, 이 지형 자체가 되어 깊은 잠에 빠졌다고 한다.<br><br>

<strong>🥚 중심에 놓인 물체 – 각성</strong><br>
산속 깊은 곳에서 알처럼 생긴 <span class="txt-glow">동그란 결정체(Artifact)</span>가 발견된다.<br>
이 물체는 주변의 열기가 아닌, 이곳에 서린 <span class="txt-highlight">오래된 기억과 활기</span>를 흡수해 반응하고 있다.<br>
학자들은 이를 단순한 유물이 아닌, ‘지성적 패턴’을 가진 신호기라고 결론 내린다.<br><br>

<strong>🔊 감응자의 등장</strong><br>
강촌 일대, <span class="txt-red">'정체불명의 에너지 공진(Resonance)'</span>이 급격히 증가한다.<br>
이 파장은 과거 수많은 사람들이 이곳에 남기고 간 <span class="txt-glitch">젊음의 잔재</span>와 공명하고 있다.<br>
이 신호를 감지할 수 있는 극소수의 인간, <span class="txt-highlight">감응자(Sensor)</span>.<br><br>

당신은 그 감응자 중 한 명으로서 현장으로 파견된다.<br>
이곳에 잠든 거대한 무언가가 깨어나고 있다.`, 
    answer: "시작",
    hint: "프롤로그를 모두 읽었다면 정답 칸에 '시작'이라고 입력해 주세요."
  },
  {
    subtitle: "프롤로그. 수첩을 줍다",
    text: `열차가 떠난 뒤, 텅 빈 플랫폼에 바람이 스쳤다.<br>
과거 수많은 청춘들이 오갔을 이 자리.<br>
지금은 고요만이 남았지만, 당신의 감각은 <span class="txt-glitch">시끄러운 환청</span>을 듣고 있다.<br>
보고된 공진 신호는 이곳 강촌역을 중심으로 퍼져 나가고 있었다.<br><br>

그때, 발치로 작은 그림자가 굴러왔다.<br>
설명하기 어려운 궤적이었다.<br>
당신은 허리를 굽혀 그것을 주워 들었다.<br><br>

<strong><span class="txt-blue">수첩.</span></strong><br>
강촌의 지맥을 옮겨놓은 듯한 표지.<br>
손끝에 미세한 떨림이 전해졌다.<br>
마치 오랫동안 주인을 기다려온 물건처럼.<br><br>

<span class="txt-highlight">&lt;이 수첩을 줍는 자, 강의 맥박을 듣게 되리라.&gt;</span><br>
문장과 동시에, 귓속 깊은 곳에서 묵직한 파동이 울렸다.<br>
일반인은 느낄 수 없고, <span class="txt-blue">감응자만이 들을 수 있는 신호</span>.<br><br>

<strong><span class="txt-glitch">수첩</span></strong>은 기묘하게 떨리고 있었다.<br>
아티팩트 역시 공명했다.<br>
마치 당신이 올 것을 알고 있었다는 듯이.<br><br>

공명은 앞의 <span class="txt-glitch">카페</span>로 향했다.<br>
당신은 그 공명을 따라, 카페로 향한다.<br><br>

(바닥의 QR코드를 찍어 문제를 확인하세요.)`,
    answer: "상록",
    hint: "한글, QR코드를 찍고 얻은 정답을 입력하세요."
  },
  {
    subtitle: "1장. 잔재 파동이 깨어나다",
    text: `수첩이 요구한 답을 적자, <span class="txt-highlight">희미한 선 하나</span>가 떠올랐다.<br>
지도의 길은 단순한 도로가 아니었다.<br>
땅 밑에 흐르는 <span class="txt-blue">에너지의 혈관</span>을 따라 그려진 선이었다.<br><br>

선은 실시간으로 변화하는 지시 문양처럼 꿈틀거렸다.<br>
주머니 속 <span class="txt-glow">아티팩트</span>가 낮게 울렸다.<br>
척추를 타고 오르는 전율.<br>
아티팩트는 수첩의 변화와 동기화되고 있었다.<br><br>

수첩과 아티팩트가 이끄는 곳.<br>
그곳은 언덕 아래 사거리까지 이어져 있었다.<br>
<span class="txt-glitch">도로표지판</span>, 그곳에서 가장 큰 파장이 느껴졌다.<br><br>

(기둥의 QR코드를 찍어 문제를 확인하세요.)`,
    answer: "종말",
    hint: "한글, 도로 표지판을 자세히 보세요."
  },
  {
    subtitle: "2장. 첫문양이 깨어난 순간",
    text: `<span class="txt-red">종말?</span><br>
이곳은 한때 시작의 장소였으나, 지금은 멈춰버린 땅.<br>
꽤 아이러니하다고 생각하며 걸음을 옮겼다.<br><br>

세 번째 페이지는 묘한 기운을 뿜었다.<br>
종이 위에 빛의 점들이 모여 <span class="txt-glow">하나의 문양</span>이 되었다.<br>
규칙적으로 회전하는 원형 구조.<br>
강촌의 지형과 닮아 있는 굴곡진 선들.<br><br>

선들은 종이 위에서 약간 들뜬 상태로 진동했다.<br>
손을 뻗자 문양은 속도를 바꾸었다.<br>
살아있는 생명체처럼 당신을 ‘인식’했다.<br><br>

이 문양은 단순한 장식이 아니다.<br>
<span class="txt-highlight">땅속 깊이 묻힌 거대 생명체의 신호</span>.<br>
그것을 깨우는 열쇠.<br><br>

그때, <span class="txt-glitch">옆에서</span> 파동과 함께 당신을 부르는 소리가 들렸다.<br><br>

(근처의 QR코드를 찾아 문제를 확인하세요.)`,
    answer: "2",
    hint: "숫자, 사거리의 계단과 그 표지판을 잘 살피세요."
  },
  {
    subtitle: "3장. 기억을 먹는 공진",
    text: `"당신을 <span class="txt-highlight">2배</span> 더 사랑합니다!"<br>
오래된 문구. 이곳을 스쳐간 수많은 연인들의 기억.<br>
아티팩트는 그 <span class="txt-blue">감정의 잔재</span>를 흡수하듯 강하게 떨렸다.<br><br>

'반응이 빨라지고 있어…'<br>
포화 직전처럼 반복되는 진동.<br>
수첩의 페이지가 부드럽게 열렸다.<br>
거칠게 그려진 선 두 개가 교차하며 새 문양을 형성했다.<br>
이전보다 더 <span class="txt-red">공격적인 형태</span>.<br><br>

문양과 아티팩트의 파동이 충돌하며<br>
짧지만 선명한 <span class="txt-blue">공명음</span>이 차게 울렸다.<br>
누군가 귓가에서 속삭이는 듯한 압력.<br><br>

공진은 감응자의 기력을 갉아먹으며 시작되고 있었다.<br>
이번 파동은 길 건너, <span class="txt-glitch">편의점 방향</span>에서 오고 있었다.<br><br>

(편의점 근처의 QR코드를 찍어 문제를 확인하세요.)`,
    answer: "OWNER",
    hint: "영어, 건물의 생김새와 주어진 이미지를 비교하세요."
  },
  {
    subtitle: "4장. 산맥에 드리운 그림자",
    text: `'<span class="txt-highlight">OWNER</span>'...<br>
이 땅의 진짜 주인.<br><br>

빛이 아닌 <span class="txt-glow">‘그림자’ 같은 실루엣</span>이 잠시 스쳐 지나갔다.<br>
시야 깊은 곳에서 느껴진 잔상.<br>
그것은 멀리 보이는 <span class="txt-red">삼악산의 능선</span>과 정확히 일치했다.<br><br>

거대했다.<br>
전설 속 존재들은 사라진 게 아니었다.<br>
그저 <span class="txt-blue">지형 그 자체가 되어</span> 잠들어 있었을 뿐.<br><br>

'이 산들이 전부… 그 생명체의 일부라면?'<br>
지금 흔적이 <span class="txt-red">깨어나고 있다</span>.<br><br>

수첩은 빨리 걸음을 옮기라는 듯, 파동의 지점을 강하게 표시했다.<br>
중학교 방향으로 계속해서 걸어가자, 작은 마을이 나왔다.<br>
파동이 흘러나오고 있는 <span class="txt-glitch">마을회관 앞</span>으로 다가갔다.<br><br>

(벽면의 QR코드를 찍어 문제를 확인하세요.)`,
    answer: "선대의 유서",
    hint: "한글, 순서가 중요합니다."
  },
  {
    subtitle: "5장. 문양언어의 등장",
    text: `여섯 번째 페이지, '<span class="txt-highlight">선대의 유서</span>'.<br>
단순한 낙서가 아니었다.<br>
고대 생명체를 모시던 이들이 남긴 <span class="txt-blue">메시지 체계</span>.<br><br>

손가락을 문양 위에 대자, 의미의 흐름이 느껴졌다.<br>
단어로 읽히진 않지만, 무언가 전달하려는 의지.<br>
아티팩트가 이 문양에 기묘하게 호응했다.<br><br>

그러나 문양은 완전히 열리진 않았다.<br>
일부는 가려져 있었고,<br>
어떤 의미는 <span class="txt-red">기능적으로 잠겨 있었다</span>.<br><br>

<span class="txt-blue">수첩</span>은 제멋대로 문양을 덮어버리고 다음 페이지를 열었다.<br>
더 큰 흐름 속에 휘말리고 있음을 느꼈다.<br>
다음 지점인 <span class="txt-glitch">세븐일레븐 근처</span>로 걸음을 옮겼다.<br><br>

(세븐일레븐 근처의 QR코드를 찍어 문제를 확인하세요.)`,
    answer: "1698",
    hint: "숫자, 문제를 잘 읽어보세요."
  },
  {
    subtitle: "6장. 생명력 고갈과 본능",
    text: `<span class="txt-glow">아티팩트</span>는 이제 새로운 심장처럼 규칙적으로 뛰었다.<br>
반면, 당신의 체력은 급격히 소진되고 있었다.<br>
공진이 당신의 <span class="txt-red">생명력</span>을 연료로 삼고 있기 때문이었다.<br><br>

현기증이 일었다.<br>
몸이 본능적으로 <span class="txt-blue">‘활기’</span>가 넘치는 곳을 찾았다.<br>
음식 냄새, 사람들의 온기.<br>
그것만이 떨어진 에너지를 채울 수 있었다.<br><br>

'이건… 나를 인식하는 동시에 갉아먹고 있어.'<br>
아티팩트와 수첩은 당신을 포함한 <span class="txt-glow">하나의 회로</span>가 되었다.<br><br>

수첩은 새 페이지를 연다.<br>
살기 위해, 파장이 느껴지는 <span class="txt-glitch">순대집</span>으로 향한다.<br><br>

(근처의 QR코드를 찍어 문제를 확인하세요.)`,
    answer: "4일",
    hint: "숫자와 한글 한 글자, QR코드 문제를 잘 보세요."
  },
  {
    subtitle: "7장. 지형과 파동이 맞물리다",
    text: `걸음을 옮길 때마다 주변 환경이 반응했다.<br>
금속 난간의 울림, 지면의 진동.<br>
이곳의 골목과 건물이 마치 거대한 기계 장치의 부속품처럼 느껴졌다.<br><br>

<span class="txt-red">지형 자체가 아티팩트와 공명</span>하고 있었다.<br>
수첩의 지도 선이 가지를 쳐 다른 패턴을 만들었다.<br>
이것은 단순한 지도가 아니다.<br>
강촌 전체를 연결한 <span class="txt-blue">‘거대 생명체의 신경망’</span>이다.<br><br>

연구원은 침을 삼켰다.<br>
우리는 지금 생명체의 몸 위를 걷고 있는 셈이다.<br>
당신은 제이유마트를 넘어 <span class="txt-glitch">닭갈비 식당 사이</span>로 향했다.<br><br>

(근처의 QR코드를 찍어 문제를 확인해주세요.)`,
    answer: "3마리",
    hint: "숫자와 한글 두 글자. 그림과 비슷한 것의 개수를 세세요."
  },
  {
    subtitle: "8장. 파동의 규칙성",
    text: `문양들이 더 복잡한 배열로 나타났다.<br>
처음엔 무작위처럼 보였으나, 점차 일정한 패턴을 띠었다.<br>
이곳에 흐르는 강물의 속도와 닮은 <span class="txt-blue">정보 구조</span>.<br><br>

당신은 페이지를 손끝으로 훑었다.<br>
문양 일부가 반응하며 작은 진동을 냈다.<br>
‘이 문양이 이미 <span class="txt-glow">자신을 알고 있다</span>’는 느낌.<br><br>

인간의 논리로는 설명할 수 없는 규칙.<br>
허기가 졌다. 에너지가 필요했다.<br>
본능적으로 이끌리듯 걸음을 재촉했다.<br><br>

파동은 <span class="txt-glitch">짜장면 냄새가 강해지는 방향</span>에서 감지됐다.<br><br>

(근처의 QR코드를 찍어 문제를 확인해주세요.)`,
    answer: "전복 낙지 가리비 새우",
    hint: "한글, 특수문자 없음. 띄어쓰기 존재."
  },
  {
    subtitle: "9장. 고대 기술의 활성화",
    text: `열 번째 페이지에서 수첩이 섬광을 뿜었다.<br>
문양은 빛의 실처럼 풀려나 선명해졌다.<br>
아티팩트도 동시에 빛을 뿜었다.<br><br>

이건 단순한 생물학적 반응이 아닌 <span class="txt-blue">기술</span>이었다.<br>
자연물과 기계가 융합된 고대의 기술.<br>
빛은 살아있는 듯 흔들렸다.<br><br>

'이건 <span class="txt-red">의식</span>이군…'<br>
각성까지 이어지는 <span class="txt-blue">절차</span>.<br>
누군가가 ‘발견자를 위한 여정’으로 설계한 구조.<br>
연구원은 다음 단서를 향해 걸었다.<br><br>

다음 파동은 황량한 들판 위,<br>
오래된 나무가 지키고 있는 <span class="txt-glitch">작은 오두막</span>에서 느껴졌다.<br><br>

(벽면의 QR코드를 찍어 문제를 확인해주세요.)`,
    answer: "느티나무",
    hint: "한글, 가려진 곳에 위치한 단어를 쓰세요."
  },
  {
    subtitle: "10장. 강물, 그리고 혈관",
    text: `아티팩트의 파동이 몸 깊이 스며들었다.<br>
시야 주변이 흔들렸다.<br>
바람 소리는 물속을 흐르는 음처럼 둔탁해졌다.<br><br>

저 멀리 흐르는 <span class="txt-blue">북한강</span>.<br>
아티팩트의 맥박이 강의 유속과 정확히 일치했다.<br>
강물은 단순한 물이 아니었다.<br>
이 거대 생명체에게 에너지를 공급하는 <span class="txt-red">혈관</span>이었다.<br><br>

현실의 결이 조금씩 틀어지고 있었다.<br>
아무도 당신을 바라보지 않았다.<br>
오직 감응자만이 이 <span class="txt-glitch">왜곡 현상</span>을 겪고 있다.<br><br>
<span class="txt-glitch">노란 조형물</span>에서 파장이 느껴졌다.<br><br>

(근처에 부착된 QR코드를 찍어 문제를 확인해주세요.)`,
    answer: "강물",
    hint: "한글, 강촌에 없어서는 안 되는 것."
  },
  {
    subtitle: "11장. 즐거움의 잔향",
    text: `다음 페이지에는 기괴한 형상이 나타났다.<br>
아티팩트가 깊고 낮은 울림을 냈다.<br>
가슴뼈까지 진동시키는 느낌.<br><br>

문양의 중앙 틈이 <span class="txt-glow">‘열리는 것처럼’</span> 보였다.<br>
빛이 스며나오고, 현실의 경계가 모호해졌다.<br><br>

'<span class="txt-red">경계…</span>'<br>
오래전 사람들의 비명과 웃음소리가 섞인 환청.<br>
가장 강력한 기억의 에너지가 고인 곳.<br>
수첩은 그곳을 '틈'이라고 지칭했다.<br><br>

당신은 떨리는 숨을 내쉬며 경계를 향해 다가갔다.<br>
<span class="txt-glitch">테마랜드</span>로 이어지는 파장.<br><br>

(테마랜드 안에 부착된 QR코드를 찍어 문제를 확인해주세요.)`,
    answer: "102510",
    hint: "숫자, 읽은 순서 그대로."
  },
  {
    subtitle: "12장. 대피소를 찾아서",
    text: `열세 번째 페이지는 기묘하게 조용했다.<br>
문양도, 빛도 없었다.<br>
종이 표면에서 흐릿한 글씨가 떠올랐다.<br><br>

<strong><span class="txt-red">'감응자는 단순한 탐색자가 아니다…'</span></strong><br>
그 뒤의 문장은 잘 읽히지 않았다.<br>
하지만 단어 하나는 선명했다.<br>
<span class="txt-highlight">‘희생’</span><br><br>

심장이 세게 뛰었다.<br>
파동이 너무 강해져 견딜 수 없었다.<br>
숨을 곳이 필요했다.<br>
이 지역에서 유일하게 파동이 닿지 않는 <span class="txt-blue">결계의 장소</span>.<br><br>

보고 받은 요원의 위치, <span class="txt-glitch">카페 'THE1939'</span>.<br>
그곳만이 안전하다.<br>
당신은 살기 위해 그곳으로 향한다.<br><br>

(카운터에서 일하시는 분이 비밀 요원입니다. '강촌은 그리움이'라고 말하면, 대답해주시면서 QR을 보여주실 겁니다!)`,
    answer: "물안개로 피어나고",
    hint: "한글, 비밀요원에게 다시 물어보시거나, QR코드를 다시 찍어보세요."
  },
  {
    subtitle: "13장. 드러난 뼈",
    text: `열네 번째 페이지가 열리자 아티팩트가 <span class="txt-red">폭주</span>했다.<br>
손바닥이 타들어 가는 듯했다.<br>
멀리 <span class="txt-glitch">강촌상상역</span> 방향.<br><br>

수첩의 문양이 격렬하게 흔들렸다.<br>
주변의 사물이 일시적으로 흐려졌다.<br>
아티팩트는 “<span class="txt-glow">본체로 돌아갈 준비</span>”를 하고 있었다.<br><br>

당신은 파동이 가장 짙게 느껴지는 곳으로 걸어갔다.<br>
그곳에는 거대한 콘크리트 구조물이 있었다.<br>
사람들은 터널이라 부르지만, 당신의 눈엔 다르게 보였다.<br><br>

<span class="txt-highlight">거대한 갈비뼈.</span><br>
땅 위로 드러난 고대 생명체의 뼈였다.<br>
당신은 제 발로 그 뱃속으로 걸어 들어가고 있었다.<br><br>

(벽면에 부착된 QR코드를 찍어 확인해주세요.)`,
    answer: "피암터널",
    hint: "한글, 위쪽을 잘 살펴보세요."
  },
  {
    subtitle: "14장, 감응자의 진실",
    text: `열다섯 번째 페이지.<br>
이전까지 가려져 있던 문장들이 선명해졌다.<br><br>

'<span class="txt-blue">감응자는 세계를 지탱하는 부품이다.</span><br>
그들은 반복적으로 이곳으로 소환되었다.<br>
이 수첩은 부품을 회수하기 위한 <span class="txt-red">장치</span>다.'<br><br>

눈빛이 흔들렸다.<br>
감응자는 특별한 재능을 가진 존재가 아니었다.<br>
세계를 유지하기 위한 <span class="txt-red">'도구'</span>.<br><br>

'<span class="txt-red">감응자 실종 사례</span>'들이 떠올랐다.<br>
그들은 실종된 것이 아니라 <span class="txt-red">'사용'</span>된 것이었다.<br>
아티팩트가 불안정하게 울렸다.<br><br>

자신이 어떤 역할을 맡게 될지 깨달아버린 당신.<br>
이곳을 떠나고자 다시 <span class="txt-blue">강촌역</span>으로 향한다.<br><br>

(강촌역으로 돌아가는 길, 강촌 상상역 뒤의 <span class="txt-highlight">포토존 근처</span>에서 QR코드를 찍어 문제를 확인해주세요.)`,
    answer: "13",
    hint: "숫자만. 직접 포즈를 취해보시는 건 어떠신가요?"
  },
  {
    subtitle: "15장. 반복되는 궤도",
    text: `도망치듯 발걸음을 옮겼지만, 파동은 발목을 잡았다.<br>
귀를 막아도 들려오는 소리.<br>
수첩 위로 검은 글씨가 떠올랐다.<br><br>

<strong><span class="txt-red txt-glitch">'너는 처음이 아니다.'</span></strong><br>
공기의 온도가 떨어졌다.<br><br>

'우리는 수많은 감응자를 맞이했고, 모두 제 역할을 수행했다.<br>
끊어진 기찻길처럼, 이 기록은 <span class="txt-red">영원히 반복</span>된다.'<br><br>

반복.<br>
폐역에 멈춰선 시간처럼, 당신 또한 이 굴레에 갇혀 있었다.<br>
수첩은 급히 다음 장으로 넘어갔다.<br><br>

시야 가장자리로 거대한 형상이 아른거렸다.<br>
당신은 각성 직전의 몸을 이끌고,<br>
<span class="txt-glitch">강촌식당 앞</span>에서 멈춰 섰다.<br><br>

(근처의 QR코드를 찍어 문제를 확인해주세요.)`,
    answer: "강촌로56",
    hint: "주소, 띄어쓰기 없이."
  },
  {
    subtitle: "16장. 마지막 안식처",
    text: `겨우 강촌역 근처까지 도망쳐왔다.<br>
<span class="txt-glitch">카페124.</span><br>
이곳만 지나면, 곧 강촌역이었다.<br><br>

그러나 추격은 멈추지 않았다.<br>
<span class="txt-glow">마지막 문양</span>이 완성되고, 아티팩트는 문을 열 준비를 마쳤다.<br><br>

잠시라도 <span class="txt-red">희생</span>을 미루기 위해 카페로 비틀거리며 들어갔다.<br>
이곳 역시 결계가 쳐진 안식처.<br>
<span class="txt-blue">고대의 존재</span>가 잠시 세력을 감추었다.<br><br>

일반인들의 시선 속에 섞여, 당신은 거친 숨을 골랐다.<br>
마지막 힘을 짜내야 했다.<br><br>

(외부 벽면의 QR코드를 찍어 문제를 확인해주세요.)`,
    answer: "물안개 살포시 고개드는 강촌",
    hint: "한글, 카페 안쪽에 위치하고 있습니다."
  },
  {
    subtitle: "최종장. 다시, 시작",
    text: `시선을 따돌리고, 강촌역 바로 앞에 다다랐다.<br>
그러나 역에 도착하는 순간,<br>
아티팩트가 뜨겁게 달아올랐다.<br><br>
 
<span class="txt-glitch">세상이 뒤틀렸다</span>.<br>
공간이 일그러지고, 당신을 빨아들이기 시작했다.<br>
 
몸이 가벼워지고, 발아래 지면이 사라졌다.<br>
당신은, 연구원 '감응자'는 <span class="txt-glow txt-blue">선택되었다.</span><br>
조용한 파열음과 함께 연구원은 <span class="txt-red">완전히 사라졌다.</span><br><br>
 
남은 것은 강촌역 바닥을 나뒹구는 낡은 <strong><span class="txt-glitch">수첩</span></strong>.<br>
문양은 말끔히 사라진 뒤였다.<br>
 
잠시 후,<br>
연락 두절된 동료를 찾아 또 다른 연구원이 역으로 들어왔다.<br>
그의 발치로, 수첩이 굴러갔다.<br><br>
 
첫 문장이 희미하게 떠올랐다.<br>
'이 수첩을 줍는 자...'<br><br>
 
다시, <span class="txt-glow">공진의 시작</span>이었다.<br>
당신은 수첩을... <span class="txt-red">'집어든다'.</span>`, 
    answer: "집어든다", 
    hint: "당신은 수첩을 '집어든다'."
  }
];
    
    const totalStages = puzzles.length;
    let currentStage = 0;

    const stageLabelEl    = document.getElementById("stageLabel");
    const stageSubtitleEl = document.getElementById("stageSubtitle");
    const storyTextEl     = document.getElementById("storyText");
    const messageEl       = document.getElementById("message");
    const hintAreaEl      = document.getElementById("hintArea");
    const hintContentEl   = document.getElementById("hintContent");
    const answerInputEl   = document.getElementById("answerInput");
    const submitBtnEl     = document.getElementById("submitBtn");
    const answerAreaEl    = document.getElementById("answerArea");
    const clearBlockEl    = document.getElementById("clearBlock");
    const restartBtnEl    = document.getElementById("restartBtn");
    const gameContentEl   = document.getElementById("gameContent");

    function normalize(text) {
      return text.trim().replace(/\s/g, '').toLowerCase(); 
    }

    function updateProgress() {
      const total = totalStages;
      stageLabelEl.textContent    = `STAGE ${currentStage + 1} / ${total}`;
    }

    function renderStage() {
      if (gameContentEl) gameContentEl.style.display = "block";
      if (clearBlockEl) clearBlockEl.style.display = "none";

      const p = puzzles[currentStage];

      stageSubtitleEl.textContent = p.subtitle || "현장 로그를 읽고 코드를 입력하세요.";
      storyTextEl.innerHTML       = p.text || ""; // HTML 태그 적용됨
      messageEl.textContent       = "";
      messageEl.className         = "message";

      answerInputEl.value    = "";
      answerInputEl.disabled = false;
      submitBtnEl.disabled   = false;
      submitBtnEl.textContent = "SUBMIT";
      answerAreaEl.style.display = "block";

      hintContentEl.textContent = p.hint || "제공된 힌트가 없습니다.";

      if (currentStage === 0 || currentStage === 1) {
          hintAreaEl.classList.add("active");
      } else {
          hintAreaEl.classList.remove("active");
      }

      const hintDetails = hintAreaEl.querySelector('details');
      if (hintDetails) hintDetails.removeAttribute('open');

      updateProgress();
      answerInputEl.focus();
      window.scrollTo(0, 0); 
    }

    function showClear() {
      stageLabelEl.textContent    = `GAME CLEARED`;
      if (gameContentEl) gameContentEl.style.display = "none";
      if (clearBlockEl) clearBlockEl.style.display  = "block";
      window.scrollTo(0, 0);
    }

    function checkAnswer() {
      const userAnswer = normalize(answerInputEl.value);
      const correct    = normalize(puzzles[currentStage].answer || "");

      if (!userAnswer) {
        messageEl.textContent = "정답(코드)을 입력해 주세요.";
        messageEl.className   = "message error";
        return;
      }

      if (userAnswer === correct) {
        messageEl.textContent = "✅ 정답입니다! 다음 장으로 이동합니다.";
        messageEl.className   = "message success";

        submitBtnEl.disabled   = true;
        answerInputEl.disabled = true;
        submitBtnEl.textContent = "✔ NEXT LOADING...";

        setTimeout(() => {
          submitBtnEl.textContent = "SUBMIT";
          if (currentStage >= totalStages - 1) {
            showClear();
          } else {
            currentStage += 1;
            renderStage();
          }
        }, 900);
      } else {
        messageEl.textContent = "❌ 코드가 일치하지 않습니다. 다시 확인해 보세요.";
        messageEl.className   = "message error";
      }
    }

    submitBtnEl.addEventListener("click", checkAnswer);
    answerInputEl.addEventListener("keydown", (e) => {
      if (e.key === "Enter") checkAnswer();
    });

    if (restartBtnEl) {
      restartBtnEl.addEventListener("click", () => {
        currentStage = 0;
        renderStage();
      });
    }

    renderStage();
  </script>
</body>
</html>
