<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>코드명: 에그 노이즈 - 필드 로그</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>
    :root {
      --bg-gray: #111827;
      --paper: #faf7f2;
      --line: #e2ddd4;
      --margin-line: #c4a58c;
      --margin-line-new: #b8987b;
      --text-main: #222222;
      --text-sub: #6b7280;
      --accent: #111111;
      --accent-blue: #2563eb;
      --highlight-yellow: #fde047;
      --highlight-text: #854d0e;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      min-height: 100vh;
      background: var(--bg-gray);
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    .notebook-card {
      width: 100%;
      max-width: 600px;
      margin: 0 auto;
      min-height: 100vh;
      background: #020617;
      display: flex;
      flex-direction: column;
    }

    .spiral-header {
      padding: 12px 16px 8px;
      background: linear-gradient(135deg, #020617, #111827);
      color: #e5e7eb;
      box-shadow: 0 2px 6px rgba(0,0,0,0.5);
    }

    .spiral-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 6px;
    }

    .spiral-holes {
      display: flex;
      gap: 6px;
    }

    .spiral-hole {
      width: 13px;
      height: 13px;
      border-radius: 999px;
      background: #020617;
      box-shadow:
        0 0 0 2px #d4d4d4,
        inset 0 0 3px rgba(0,0,0,0.9);
      position: relative;
    }

    .spiral-wire {
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      width: 19px;
      height: 3px;
      border-radius: 999px;
      background: #d4d4d4;
      box-shadow:
        0 2px 0 rgba(0,0,0,0.4),
        0 -1px 0 rgba(255,255,255,0.7);
    }

    .spiral-wire.top { top: -6px; }
    .spiral-wire.bottom { bottom: -6px; }

    .lab-header-text {
      text-align: right;
      font-size: 0.72rem;
      letter-spacing: 0.16em;
      text-transform: uppercase;
      color: #9ca3af;
    }

    .lab-main-title {
      margin-top: 4px;
      font-size: 1.05rem;
      font-weight: 600;
      letter-spacing: 0.18em;
      text-transform: uppercase;
    }

    .lab-subtitle {
      margin-top: 2px;
      font-size: 0.78rem;
      letter-spacing: 0.22em;
      text-transform: uppercase;
      color: #d1d5db;
    }

    .paper-wrap {
      flex: 1;
      background: #111827;
      padding: 10px 16px 16px;
      overflow-y: auto;
    }

    .paper {
      position: relative;
      border-radius: 14px;
      background:
        repeating-linear-gradient(
          to bottom,
          var(--paper) 0,
          var(--paper) 24px,
          var(--line) 25px
        );
      box-shadow:
        0 8px 18px rgba(0,0,0,0.45),
        0 0 0 1px rgba(0,0,0,0.25);
      padding: 18px 18px 18px 40px;
      min-height: calc(100vh - 110px);
    }

    .paper::before {
      content: "";
      position: absolute;
      top: 0;
      bottom: 0;
      left: 28px;
      width: 2px;
      background: linear-gradient(to bottom, transparent, var(--margin-line-new), transparent);
      opacity: 0.9;
    }

    .paper-header {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      margin-bottom: 6px;
    }

    .paper-header-left {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .paper-label {
      font-size: 0.8rem;
      color: var(--text-sub);
      letter-spacing: 0.16em;
      text-transform: uppercase;
    }

    .paper-title {
      font-size: 1.05rem;
      font-weight: 600;
      color: var(--text-main);
    }

    .paper-header-right {
      text-align: right;
      font-size: 0.72rem;
      color: var(--text-sub);
    }

    .stage-pill {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 1px 6px;
      border-radius: 999px;
      border: 1px solid #c4b5a5;
      font-size: 0.65rem;
      background: rgba(250, 247, 242, 0.95);
      color: var(--text-sub);
      text-transform: uppercase;
      letter-spacing: 0.1em;
    }
    
    .answer-label-pill {
      display: inline-block;
      padding: 4px 10px;
      border-radius: 8px;
      background: var(--text-main);
      color: var(--paper);
      font-size: 0.86rem;
      font-weight: 600;
      letter-spacing: 0.1em;
      margin-bottom: 4px;
      margin-top: 4px;
    }

    .progress-wrap {
      margin: 4px 0 4px;
    }

    .progress-bar-bg {
      width: 100%;
      height: 4px;
      border-radius: 999px;
      background: rgba(0,0,0,0.06);
      overflow: hidden;
      display: none;
    }

    .progress-bar-fill {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, var(--accent-blue), #111827);
      transition: width 0.3s ease;
    }

    .progress-text {
      margin-top: 3px;
      font-size: 0.7rem;
      color: var(--text-sub);
      text-align: right;
      display: none;
    }

    .subtitle {
      font-size: 0.86rem;
      color: var(--text-sub);
      margin: 4px 0 6px;
    }
    
    .subtitle-separator {
        width: 100%;
        height: 1px;
        background: #e2ddd4;
        margin: 8px 0 12px;
        opacity: 0.6;
    }

    .story-text {
      font-size: 0.95rem;
      color: var(--text-main);
      white-space: pre-line;
      line-height: 1.75;
      margin-bottom: 14px;
    }

    /* 볼드 처리 및 글씨 크기 키우기 */
    .story-text strong {
      font-size: 1.05rem;
    }

    label {
        display: none;
    }

    input[type="tel"] {
      width: 100%;
      padding: 8px 10px;
      border-radius: 8px;
      border: 1px solid #c4b5a5;
      font-size: 0.95rem;
      font-family: inherit;
      background: rgba(255,255,255,0.98);
      color: var(--text-main);
    }

    input[type="tel"]:focus {
      outline: none;
      border-color: var(--accent-blue);
      box-shadow: 0 0 0 1px rgba(37, 99, 235, 0.5);
      background: #ffffff;
    }

    button {
      width: 100%;
      margin-top: 8px;
      padding: 9px 10px;
      border-radius: 999px;
      border: none;
      background: var(--accent);
      color: #ffffff;
      font-size: 0.82rem;
      font-weight: 600;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      cursor: pointer;
      box-shadow: 0 7px 16px rgba(0,0,0,0.35);
      transition: transform 0.05s ease, filter 0.06s ease, box-shadow 0.1s ease;
    }

    button:active {
      transform: translateY(1px);
      filter: brightness(0.93);
      box-shadow: 0 4px 9px rgba(0,0,0,0.4);
    }

    button:disabled {
      opacity: 0.5;
      cursor: default;
      box-shadow: none;
    }

    .message {
      margin-top: 4px;
      font-size: 0.82rem;
      min-height: 1.2em;
    }

    .message.error { color: #c62828; }

    /* ⭐ 정답 알림창 크게 강조 ⭐ */
    .message.success { 
      color: #2e7d32;
      font-size: 1.2rem;
      font-weight: 700;
      padding: 8px 0;
      text-align: center;
      background-color: #e6ffe6;
      border-radius: 8px;
    }
    
    /* 힌트 토글 스타일 */
    .hint-area {
      margin-top: 8px;
    }
    .hint-area details {
      border: 1px solid #c4b5a5;
      border-radius: 8px;
      background: rgba(255, 255, 255, 0.5);
      overflow: hidden;
      margin-top: 8px;
      color: var(--text-main);
    }
    .hint-area summary {
      padding: 8px 10px;
      font-size: 0.82rem;
      font-weight: 600;
      cursor: pointer;
      list-style: none;
    }
    .hint-area summary:focus {
        outline: none;
        background: rgba(255, 255, 255, 0.8);
    }
    .hint-area summary::before {
        content: "▶";
        display: inline-block;
        font-size: 0.7rem;
        margin-right: 8px;
        transition: transform 0.1s ease;
    }
    .hint-area details[open] summary::before {
        transform: rotate(90deg);
    }
    .hint-content {
      padding: 8px 10px;
      font-size: 0.8rem;
      background: var(--paper);
      border-top: 1px solid #e2ddd4;
      white-space: pre-line;
    }

    /* 프롤로그 힌트 강조 스타일 */
    .hint-area.active details {
        border-color: var(--highlight-text);
        box-shadow: 0 0 5px rgba(253, 224, 71, 0.7);
    }
    .hint-area.active summary {
        background: var(--highlight-yellow);
        color: var(--highlight-text);
    }

    .clear-block {
      margin-top: 12px;
      font-size: 0.9rem;
      color: var(--text-main);
      display: none;
    }

    .clear-badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 2px 8px;
      border-radius: 999px;
      border: 1px solid #2e7d32;
      color: #2e7d32;
      font-size: 0.74rem;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      background: rgba(222, 247, 222, 0.9);
      margin-bottom: 4px;
    }

    .clear-title {
      font-weight: 600;
      margin-bottom: 4px;
    }

    .clear-text {
      font-size: 0.88rem;
      color: var(--text-sub);
      line-height: 1.6;
    }

    .restart-btn {
      margin-top: 10px;
      width: 100%;
      padding: 8px 10px;
      border-radius: 999px;
      border: 1px solid #111827;
      background: transparent;
      color: #111827;
      font-size: 0.8rem;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      cursor: pointer;
    }

    .restart-btn:active {
      transform: translateY(1px);
      filter: brightness(0.96);
    }
  </style>
</head>
<body>
  <div class="notebook-card">
    <div class="spiral-header">
      <div class="spiral-row">
        <div class="spiral-holes">
          <div class="spiral-hole">
            <div class="spiral-wire top"></div>
            <div class="spiral-wire bottom"></div>
          </div>
          <div class="spiral-hole">
            <div class="spiral-wire top"></div>
            <div class="spiral-wire bottom"></div>
          </div>
          <div class="spiral-hole">
            <div class="spiral-wire top"></div>
            <div class="spiral-wire bottom"></div>
          </div>
        </div>
        <div class="lab-header-text">
          BACKWOODS RESEARCH INSTITUTE
        </div>
      </div>
      <div class="lab-main-title">CODE: EGG NOISE</div>
      <div class="lab-subtitle">GANGCHON BASE</div>
    </div>

    <div class="paper-wrap">
      <div class="paper">
        <div class="paper-header">
          <div class="paper-header-left">
            <div class="paper-label">FIELD NOTES</div>
            <div class="paper-title">
              코드명: 에그 노이즈 <br> (Code: Egg Noise)
            </div>
          </div>
          <div class="paper-header-right">
            <div class="stage-pill" id="stageLabel">
              STAGE 1 / 20
            </div>
          </div>
        </div>

        <div class="progress-wrap">
          <div class="progress-bar-bg" style="display: none;"></div>
        </div>

        <div class="subtitle" id="stageSubtitle">
          힌트를 읽고 현장에서 얻은 코드를 입력하세요.
        </div>
        
        <div class="subtitle-separator"></div>

        <div class="story-text" id="storyText">
          스테이지 내용이 여기에 표시됩니다.
        </div>

        <div id="answerArea">
          <div class="answer-label-pill">CODE / 정답</div>
          <label for="answer">CODE / 정답</label>
          <input id="answer" type="tel" inputmode="numeric" autocomplete="off" />
          <button id="submitBtn">SUBMIT</button>
          <div id="message" class="message"></div>
          
          <div id="hintArea" class="hint-area">
             <details>
                <summary id="hintSummary">힌트 보기</summary>
                <div class="hint-content" id="hintContent"></div>
             </details>
          </div>
        </div>

        <div class="clear-block" id="clearBlock">
          <div class="clear-badge">
            <span>🎉</span><span>ALL STAGES CLEARED</span>
          </div>
          <div class="clear-title">필드 로그 작성 완료</div>
          <div class="clear-text">
            모든 스테이지에서 수집한 코드가 기록되었습니다.<br />
            이 노트를 들고 진행자를 찾아가세요.
          </div>
          
          <a href="https://forms.gle/y1YVeoTPLMm19ugSA" target="_blank" style="text-decoration: none;">
            <button class="restart-btn" style="background: #e9e9e9; color: #222; margin-bottom: 15px; border: 1px solid #aaa; box-shadow: none;">
                💡만족도 조사 참여하기💡
            </button>
          </a>

          <button class="restart-btn" id="restartBtn">
            다시 수첩 주워들기
          </button>
        </div>
      </div>
    </div>
  </div>

  <script>
    const puzzles = [
      // ----------------------------------------------------
      // ⭐ STAGE 1 (인덱스 0): 프롤로그. 사라진 시대의 잔향
      // ----------------------------------------------------
      {
        subtitle: "프롤로그. 사라진 시대의 잔향",
        text: `**고대 생명체가 사라진 시대**
아주 오래전, 강촌 인근에는 지금은 기록에서 사라진 거대 비행 생명체가 존재했다는 전설만 흐릿하게 남아 있다.
현대 과학으로는 정체를 알 수 없는 생명체였고, 어느 순간 흔적 없이 사라졌다.
이 전설은 사실 여부도 불분명한 채 지역의 신화처럼만 전해진다.

**중심에 놓인 물체 – 부화가 아닌 ‘각성’**
강촌 산속 특정 지점에서 알처럼 생긴 동그란 결정체(Artifact)가 발견된다.
따뜻하지도 차갑지도 않은 이 물체는 생체 반응도, 기계 반응도 아닌 독특한 파동을 내고 있다.
당초 학자들은 생명체의 알이라고 추측했으나, 이후 분석 결과에 따르면 ‘생명체적 신호’와 ‘지성적 패턴’이 동시에 존재하는, 정체불명의 유물이라는 결론이 내려진다.

**현대의 이상 현상 – 감응자의 등장**
강촌 일대, 아티팩트가 발견된 곳에서 '정체불명의 에너지 공진(Resonance)'이 급격히 증가한다.
레이더에는 주기적으로 신호가 찍히지만 기존 장비로는 분석되지 않는 파장이다.
그러던 중, 이 신호가 극소수의 인간에게만 감각적 자극을 주는 것이 발견된다.

학자들은 그들을 감응자(Sensor)라 명명하고, 연구에 투입하게 된다.

이제, 그 감응자 중 한 명으로서 당신이 현장으로 파견된다.`, 
        answer: "시작",
        hint: "프롤로그를 모두 읽었다면 정답 칸에 '시작'이라고 입력해 주세요."
      },
      // ----------------------------------------------------
      // ⭐ STAGE 2 (인덱스 1): 프롤로그. 수첩을 줍다
      // ----------------------------------------------------
      {
        subtitle: "프롤로그. 수첩을 줍다",
        text: `열차가 떠난 뒤, 잔열이 남은 바람이 플랫폼을 스치고 지나갔다. 
감응자로서 파견된 연구원, 당신은 배낭을 고쳐 매며 주변을 살폈다.
보고된 공진 신호는 모두 이곳, 강촌역을 중심으로 퍼져 나가고 있었다. 
당신은 특별한 장비 없이 자신의 감각에만 의존해야 하는 첫 파견 임무에 
익숙지 않은 긴장을 느끼고 있었다.

그때, 발치로 작은 그림자가 굴러왔다.
바람의 방향과도 맞지 않는, 설명하기 어려운 궤적이었다.
당신은 무심코 허리를 굽혀 그것을 주워 들었다.

수첩.
강촌의 지도를 닮은 듯한 특이한 표지, 손끝에 전해지는 미세한 떨림. 
마치 오랫동안 누군가를 기다려온 물건처럼 느껴졌다. 

당신은 천천히 첫 페이지를 펼쳤다.

<이 수첩을 줍는 자, 공진을 느낄 뿐 아니라 들을 수 있다.>
문장과 동시에,
귓속 깊은 곳에서 낮고 묵직한 파동이 울렸다. 
보고서에서 묘사되던 그 감각.
일반인은 느낄 수 없고, 감응자만이 들을 수 있다는 신호.

당신은 숨을 가볍게 삼켰다.
수첩은 그의 손에서 아주 기묘하게 떨리고 있었다. 
동시에 아티팩트 역시 공명했다.
마치 그가 오기를 알고 있었다는 듯이.

이 수첩을 집어든 순간, 이미 조사가 아니라,
새로운 것이 시작되었다는 사실을 불현듯 깨달았다.

공명은 앞의 카페로 향했다.
당신은 그 공명을 따라, 카페로 향한다.

(바닥의 QR코드를 찍어 문제를 확인하세요.)`,
        answer: "상록",
        hint: "한글, QR코드를 찍고 얻은 정답을 입력하세요."
      },
      // ----------------------------------------------------
      // ⭐ STAGE 3 (인덱스 2): 1장. 잔재 파동이 깨어나다
      // ----------------------------------------------------
      {
        subtitle: "1장. 잔재 파동이 깨어나다",
        text: `수첩이 요구한 답을 적자, 종이 위에 희미한 선 하나가 천천히 떠올랐다. 
먹이 번진 것도, 오래된 흔적도 아닌, 마치 지금 ‘생겨나는’ 것처럼 선명해졌다.

당신은 손가락을 조심스레 가까이 대보았다.
선은 그의 움직임에 반응하듯 미세하게 떨렸다.
지도처럼 보이기도 했고, 파동이 흐르는 경로처럼도 보였다. 

하지만 무엇보다 기이했던 것은,
이 선이 정적인 기록물이 아니라, 실시간으로 변화하는 지시 문양이라는 사실이었다.

이때 주머니 속 아티팩트가 낮게 울렸다. 
기계음도, 금속성 진동도 아닌 깊은 파동의 울림. 
감응자의 신경을 건드리는 미세한 떨림이 척추를 타고 올라왔다. 
아티팩트는 수첩의 변화와 완전히 동기화되는 듯했다.

변화가 생긴 아티팩트를 살핀 당신.
수첩과 아티팩트가 함께 반응하는 곳으로 향한다.
그곳은 언덕 아래 사거리까지 이어져 있었다.

(바닥의 QR코드를 찍어 문제를 확인하세요.)`,
        answer: "종말",
        hint: "한글, 도로 표지판을 자세히 보세요."
      },
      // ----------------------------------------------------
      // ⭐ STAGE 4 (인덱스 3): 2장. 첫문양이 깨어난 순간
      // ----------------------------------------------------
      {
        subtitle: "2장. 첫문양이 깨어난 순간",
        text: `종말?
        생명체가 발견된 곳에서의 종말이라.
        당신은 꽤 아이러니하다고 생각하다가, 재촉하는 듯한 파동에 걸음을 옮겼다.
        
        세 번째 페이지는 펼쳐지는 순간부터 묘한 기운을 뿜었다.
종이 위에 작고 미약한 빛의 점들이 떠다니더니 점점 모여들었다. 
그러다 하나의 문양이 되었다.
규칙적으로 회전하는 원형 구조, 그 안에서 깜빡이는 얇은 빛의 선들.

선들은 어딘가 떠 있는 듯, 종이 위에서 약간 들뜬 상태로 진동했다. 
당신이 손을 뻗자 문양은 바로 반응하며 속도를 바꾸었다. 
살아있는 생명체처럼, 당신을 ‘인식’하는 듯했다.

이 문양이 단순한 장식이 아니라 
강촌에 남아 있는 과거의 흔적,
혹은 고대 생명체의 파동과 관련된 정보라는 느낌을 받았다.

아티팩트도 동시에 반응했다. 
문양이 회전하는 속도에 맞춰 
결정체가 일정한 패턴으로 파동을 뿜어냈다. 
둘이 서로 신호를 주고받고 있었다.
수첩은 스스로 다음 페이지로 넘어갔다.

그때, 옆에서 당신을 부르는 소리가 들렸다.

(근처의 QR코드를 찾아 문제를 확인하세요.)`,
        answer: "2",
        hint: "숫자, 사거리의 계단과 그 표지판을 잘 살피세요."
      },
      // ----------------------------------------------------
      // ⭐ STAGE 5 (인덱스 4): 3장. 공진의 첫폭발
      // ----------------------------------------------------
      {
        subtitle: "3장. 공진의 첫폭발",
        text: `"당신을 2배 더 사랑합니다!"
        남자가 무릎을 꿇고 외치자, 여자가 환하게 웃으며 꽃을 받아들었다.
        
        그들을 흐뭇하게 바라보던 당신.
        다음 지점을 향해 천천히 이동하자
아티팩트는 갑자기 더 강한 떨림을 보였다.
포화 직전처럼 반복되는 진동,
하지만 터질 듯 위험한 느낌은 아니었다.

'반응이 빨라지고 있어…'

당신이 혼잣말을 중얼거리자 수첩의 페이지가 부드럽게 열렸다.
네 번째 페이지에는,
거칠게 그려진 선 두 개가 서로 교차하며 새 문양을 형성하고 있었다.
이 문양은 이전보다 더 직선적이고 공격적인 형태였다.
마치 ‘경계’를 긋는 듯한 느낌.

연구원이 손가락을 가까이 하자
아티팩트는 더 크게 떨렸다.
문양과 아티팩트의 파동이 서로 충돌하며
짧지만 선명한 공명음이 차게 울렸다.

그 순간,
당신의 귀 뒤쪽에서 묘한 압력이 느껴졌다.
누군가 귓가 가까이에서 속삭이는 듯한 미세한 감각.
그러나 아무 소리도 들리진 않았다.
공진이 본격적으로 시작되고 있었다.

이번 파동은 길 건너, 편의점 방향으로 향하고 있었다.

(바닥의 QR코드를 찍어 문제를 확인하세요.)`,
        answer: "OWNER",
        hint: "대문자 영어, 건물의 생김새와 주어진 이미지를 비교하세요."
      },
      // ----------------------------------------------------
      // ⭐ STAGE 6 (인덱스 5): 4장. 고대생명체의 잔재흔적
      // ----------------------------------------------------
      {
        subtitle: "4장. 고대생명체의 잔재흔적",
        text: `'OWNER'...
        주인? 어떤 것의 주인을 말하는 걸까?
        
빛이 아닌 ‘그림자’ 같은 실루엣이 잠시 스쳐 지나갔다.
종이에 그려진 것이 아니라
연구원의 시야 깊은 곳에서 뭔가 지나간 듯한 잔상.

정확히 형태를 잡아낼 순 없지만
‘거대했다’는 인상만은 분명했다.

전설 속 존재들이 떠올랐다.
강촌 인근에서만 비밀리에 전해지던,
기록으로는 남지 않은 고대 생명체들.
그 생명체들은 어느 순간 흔적 없이 사라졌고,
남은 건 신화적 이야기뿐이었다.

문양은 잔상을 남긴 뒤,
천천히 연기처럼 흩어져 하나의 심볼로 바뀌었다.

그 심볼에 아티팩트가 즉시 반응했다.

'이 생명체들이… 실제로 존재했을까?'

하지만 지금 중요한 건
실재 여부가 아니라
그 흔적이 지금 깨어나고 있다는 사실이었다.

수첩은 빨리 걸음을 옮기라는 듯,
파동의 지점을 강하게 표시했다.

중학교 방향으로 계속해서 걸어가자,
사람들이 살고 있는 작은 마을이 나왔다.

당신은 주변을 둘러보다가, 파동이 흘러나오고 있는 마을회관 앞으로 다가갔다.

(벽면의 QR코드를 찍어 문제를 확인하세요.)`,
        answer: "선대의유서",
        hint: "한글, 순서가 중요합니다."
      },
      // ----------------------------------------------------
      // ⭐ STAGE 7 (인덱스 6): 5장. 문양언어의 등장
      // ----------------------------------------------------
      {
        subtitle: "5장. 문양언어의 등장",
        text: `여섯 번째 페이지에는 '선대의 유서'라는 말만 적혀 있었다.
        당신은 노트를 살피다가 낙서 같은 것을 발견했다.
        그것이 단순한 낙서가 아니었음을, 당신은 직감했다.
        
        고대 생명체들이 남긴 하나의 메시지 체계.
당신은 손가락을 조심스럽게 문양 위에 가까이 갖다댔다.
그러자 문양 일부가 희미하게 밝아지며
해독될 듯 말 듯한 의미의 흐름이 느껴졌다.
단어로 읽히진 않지만,
무언가 전달하려는 의지가 담겨 있었다.

아티팩트의 파동도 이에 반응했다.
마치 이 문양이 바로 아티팩트의 '맞은편' 언어인 것처럼
서로 기묘하게 호응했다.
그러나 문양은 완전히 열리진 않았다.
일부는 가려져 있었고,
어떤 의미는 기능적으로 잠겨 있는 것처럼 작동하지 않았다.

수첩은 제멋대로 문양을 못보도록 덮어버리고 다음 페이지를 열었다.

당신은 무언가 더 큰 흐름 속에 휘말리고 있음을 느꼈다.
다음 지점인 세븐일레븐 근처로 걸음을 옮기기 시작했다.

(벽면의 QR코드를 찍어 문제를 확인하세요.)`,
        answer: "1698",
        hint: "숫자, 문제를 잘 읽어보세요."
      },
      // ----------------------------------------------------
      // ⭐ STAGE 8 (인덱스 7): 6장. 아티팩트와의 동기화
      // ----------------------------------------------------
      {
        subtitle: "6장. 아티팩트와의 동기화",
        text: `아티팩트는 이 시점에서 마치 새로운 심장처럼
연구원의 손에서 규칙적인 파동을 뿜어냈다.
헐겁던 진동은 점차 일정한 리듬을 가지기 시작했다.
그 떨림은 결코 위험한 것이 아니라
무언가 ‘동기화’되는 과정 그 자체였다.
수첩도 이에 반응하며
페이지 가장자리에서 은은한 빛을 냈다.
빛은 산란되며 문양의 일부와 연결되었다.
연구원은 손목이 따뜻해지는 감각을 느꼈다.
아티팩트의 파동이 자신의 신경과 동조하며
몸 깊숙이까지 퍼지는 느낌.
<이건… 나를 인식하는 건가?>
그는 자신도 모르게 중얼거렸다.
아티팩트와 수첩은 이제 서로만 인식하는 것이 아니라
연구원까지 포함한 하나의 회로처럼 움직이고 있었다.
마치 그를 중심으로 삼아
‘무언가를 준비’하는 듯했다.
수첩은 새 페이지를 연다.
한층 더 강한 신호가 기다리고 있었다.`,
        answer: "4일",
        hint: "숫자와 한글 한 글자, "
      },
      // ----------------------------------------------------
      // ⭐ STAGE 9 (인덱스 8): 7장. 지형과 파동이 맞물리다
      // ----------------------------------------------------
      {
        subtitle: "7장. 지형과 파동이 맞물리다",
        text: `연구원이 다음 지점을 향해 천천히 걸음을 옮기자
주변의 환경이 아티팩트의 파동과 미묘하게 반응하는 것이 느껴졌다.
금속 난간에서 울려 나오는 둔탁한 공명,
지면을 타고 올라오는 낮은 진동,
멀리 지나가는 차량의 엔진 소리가
아티팩트의 리듬에 맞춰 변조되는 것처럼 들렸다.
연구원은 자신도 모르게 발걸음을 늦추었다.
이건 단순한 감각의 왜곡이 아니었다.
지형 자체가 아티팩트와 공명하고 있는 것이었다.
수첩은 이를 반영하듯
지도 선이 갑자기 가지를 쳐
다른 패턴을 만들어냈다.
지도는 단순한 길 안내가 아니라
강촌 곳곳에 남아 있는 잔재 파동을 연결한 ‘회로도’였다.
연구원은 침을 삼켰다.
이건 자연 현상이 아니라
유적지에 가까웠다.`,
        answer: "3마리",
        hint: "숫자와 한글 두 글자. 그림과 비슷한 것의 개수를 세세요."
      },
      // ----------------------------------------------------
      // ⭐ STAGE 10 (인덱스 9): 8장. 파동의 규칙성
      // ----------------------------------------------------
      {
        subtitle: "8장. 파동의 규칙성",
        text: `다음 페이지에는 여러 문양들이
이전보다 더 복잡한 배열로 나타났다.

처음엔 무작위처럼 보였던 문양들이
점차 일정한 패턴을 따르고 있음이 보였다.

사람의 언어와는 다르지만
명확한 규칙성을 가진 정보 구조.
당신은 페이지를 손끝으로 훑었다.
그 순간 문양 일부가 반응하며
매우 작은 진동을 냈다.

형태는 바뀌지 않았지만,
‘이 문양이 이미 그를 알고 있다’는 느낌만은 선명했다.

당슨은, 이 세계의 규칙이 인간이 만든 논리로만은 설명할 수 없다는 걸
점점 더 명확히 깨닫고 있었다.

다음 파동, 그 다음 파동.
그리고 그 끝엔 무엇이 있을지.
연구원으로서의 호기심이 끓어올랐다.
걸음을 재촉해 걷기 시작했다.

파동은 세븐일레븐 방향에서 감지됐다.

(벽면의 QR코드를 찍어 문제를 확인해주세요.)`,
        answer: "전복 낙지 가리비 새우",
        hint: "한글, 특수문자 없음. 띄어쓰기 존재."
      },
      // ----------------------------------------------------
      // ⭐ STAGE 11 (인덱스 10): 9장. 고대 기술의 활성화
      // ----------------------------------------------------
      {
        subtitle: "9장. 고대 기술의 활성화",
        text: `열 번째 페이지에서 수첩은 갑자기 밝은 섬광을 뿜었다.
문양은 빛의 실로 풀려나듯 선명하게 변했고,
아티팩트도 동시에 반응해 은은한 빛을 뿜어냈다.

두 빛은 서로를 향해 흐르더니
종이와 아티팩트 사이에 얇은 선처럼 연결되었다.

이건 생명체의 능력이 아니라, 기술이었다.

고대 생명체가 남긴,
오랜 문명이 잊힌 후에도 작동하는 기술 장치.

무심코 뻗은 당신의 손끝이 닿기도 전에
빛은 살아있는 듯 흔들렸다.

'이건 의식이군…
각성까지 이어지는 절차 중 일부…'

당신은 이제 확신할 수 있었다.
이 흐름은 자연스럽게 생긴 게 아니라
누군가가 ‘발견자를 위한 여정’으로 설계한 구조라는 것을.
연구원은 다음 단서를 향해 걸었다.

다음 파동은 지금까지와는 다르게 자연물이 존재하는 곳에서 느껴졌다.

(벽면의 QR코드를 찍어 문제를 확인해주세요.)`,
        answer: "느티나무",
        hint: "한글, 가려진 곳에 위치한 단어를 쓰세요요."
      },
      // ----------------------------------------------------
      // ⭐ STAGE 12 (인덱스 11): 10장. 감각의 흔들림
      // ----------------------------------------------------
      {
        subtitle: " 10장. 감각의 흔들림",
        text: `아티팩트의 파동이 당신의 몸에 더 깊이 스며들기 시작했다.
시야 주변이 흔들렸다.
사람들이 오가는 모습은 정상처럼 보이지만
그들의 발걸음 소리가 희미하게 변조되어 들렸다.

바람 소리는 물속을 흐르는 음처럼 둔탁해지고,
멀리서 나는 금속성 충돌음은
아티팩트의 리듬과 동일한 속도로 울렸다.

당신은 잠시 멈춰 섰다.
현실의 결이 조금씩 틀어지고 있었다.

가슴을 진정시키며 주변을 살폈지만,
이상하리만큼 아무도 당신을 바라보지 않았다.

마치 이 공진 현상이 오직 감응자에게만 나타나는 현상인 듯.
수첩은 천천히 새로운 페이지를 열었다.
문양의 밀도가 분명히 증가하고 있었다.

왜곡 이후엔? 그런 호기심과 연구원으로서의 탐구심이 고개를 들었다.
당신은 그것들을 충족시키기 위해 앞으로 걸어나갈 뿐이었다.

(벽면에 부착된 QR코드를 찍어 문제를 확인해주세요.)`,
        answer: "강물",
        hint: "한글, 강촌에 없어서는 안 되는 것."
      },
      // ----------------------------------------------------
      // ⭐ STAGE 13 (인덱스 12): 11장. 공진의 경계가 열린다
      // ----------------------------------------------------
      {
        subtitle: "11장. 공진의 경계가 열린다",
        text: `다음 페이지에는 다른 문양과는 전혀 다른 형상이 나타났다.

문양을 관찰하며 기록하고 있을 때,
아티팩트가 갑자기 깊고 낮은 울림을 냈다.
그 울림은 공기뿐 아니라 당신의 가슴뼈까지 진동시키는 느낌이었다.
문양의 중앙 틈은 실제로 ‘열리는 것처럼’ 보였다.
빛이 조금씩 스며나왔고,
종이 표면과 현실의 경계가 모호해졌다.

'경계…'

당신은 아득하게 중얼거렸다.
이 문양은 차원적 ‘틈’ 혹은 ‘문’ 같은 구조였다.
아직 완전히 열리진 않았지만,
지금 이 수첩은 분명 다른 세계로의 입구가 될 것이었다.

당신은 떨리는 숨을 내쉬었다.
경계를 향해 다가갔다.

문 안쪽으로 들어서자, 테마파크의벽면의 QR코드를 찍어 문제를 확인해주세요.)`,
        answer: "느티나무",
        hint: "한글, 가려진 곳에 위치한 단어를 쓰세요요."
      },
      // ----------------------------------------------------
      // ⭐ STAGE 12 (인덱스 11): 10장. 감각의 흔들림
      // ----------------------------------------------------
      {
        subtitle: " 10장. 감각의 흔들림",
        text: `아티팩트의 파동이 당신의 몸에 더 깊이 스며들기 시작했다.
시야 주변이 흔들렸다.
사람들이 오가는 모습은 정상처럼 보이지만
그들의 발걸음 소리가 희미하게 변조되어 들렸다.

바람 소리는 물속을 흐르는 음처럼 둔탁해지고,
멀리서 나는 금속성 충돌음은
아티팩트의 리듬과 동일한 속도로 울렸다.

당신은 잠시 멈춰 섰다.
현실의 결이 조금씩 틀어지고 있었다.

가슴을 진정시키며 주변을 살폈지만,
이상하리만큼 아무도 당신을 바라보지 않았다.

마치 이 공진 현상이 오직 감응자에게만 나타나는 현상인 듯.
수첩은 천천히 새로운 페이지를 열었다.
문양의 밀도가 분명히 증가하고 있었다.

왜곡 이후엔? 그런 호기심과 연구원으로서의 탐구심이 고개를 들었다.
당신은 그것들을 충족시키기 위해 앞으로 걸어나갈 뿐이었다.

(벽면에 부착된 QR코드를 찍어 문제를 확인해주세요.)`,
        answer: "강물",
        hint: "한글, 강촌에 없어서는 안 되는 것."
      },
      // ----------------------------------------------------
      // ⭐ STAGE 13 (인덱스 12): 11장. 공진의 경계가 열린다
      // ----------------------------------------------------
      {
        subtitle: "11장. 공진의 경계가 열린다",
        text: `다음 페이지에는 다른 문양과는 전혀 다른 형상이 나타났다.

문양을 관찰하며 기록하고 있을 때,
아티팩트가 갑자기 깊고 낮은 울림을 냈다.
그 울림은 공기뿐 아니라 당신의 가슴뼈까지 진동시키는 느낌이었다.
문양의 중앙 틈은 실제로 ‘열리는 것처럼’ 보였다.
빛이 조금씩 스며나왔고,
종이 표면과 현실의 경계가 모호해졌다.

'경계…'

당신은 아득하게 중얼거렸다.
이 문양은 차원적 ‘틈’ 혹은 ‘문’ 같은 구조였다.
아직 완전히 열리진 않았지만,
지금 이 수첩은 분명 다른 세계로의 입구가 될 것이었다.

당신은 떨리는 숨을 내쉬었다.
경계를 향해 다가갔다.

테마랜드로 이어지는 파장.

(바닥에 부착된 QR코드를 찍어 문제를 확인해주세요.)`,
        answer: "102510",
        hint: "숫자, 읽은 순서 그대로."
      },
      // ----------------------------------------------------
      // ⭐ STAGE 14 (인덱스 13): 12장. 숨겨진 글의 출현
      // ----------------------------------------------------
      {
        subtitle: "12장. 숨겨진 글의 출현",
        text: `열세 번째 페이지는 기묘하게 조용했다.
문양도, 빛도 없었다.
그러나 당신이 손을 가까이 대는 순간, 종이 표면에서 흐릿한 글씨 몇 줄이 떠올랐다.

'감응자는 단순한 탐색자가 아니다…'
글자가 완전히 보이지 않아
그 뒤의 문장이 잘 읽히지 않았다.
하지만 단어 하나는 선명했다.
‘감응자’

당신의 심장이 세게 뛰었다.
글씨는 잠시 흔들리다가 문양이 덮어버리듯 다시 희미해졌다.
아티팩트가 짧게 울렸다.
조금 조급한 리듬이었다.
마치 '더 봐야 해'라고 말하는 듯.
수첩은 스스로 다음 페이지로 넘어갔다.

그리고 당신은,
지금 막 중요한 진실의 문턱에 들어섰다는 것을 느꼈다.

그때 연락이 울렸다.
강촌에 있는 비밀요원과의 소통으로 파동의 정체를 더 알아내라는 전언이었다.`,
        answer: "그리움이 물안개로 피어나고",
        hint: "한글, 비밀요원에게 다시 물어보시거나, QR코드를 다시 찍어보세요."
      },
      // ----------------------------------------------------
      // ⭐ STAGE 15 (인덱스 14): 13장. 아티팩트의 폭주
      // ----------------------------------------------------
      {
        subtitle: "13장. 아티팩트의 폭주",
        text: `열네 번째 페이지가 열리자 아티팩트가 갑자기 불안정하게 흔들리기 시작했다.
당신의 손바닥까지 떨릴 정도였다.
수첩은 진동을 따라 문양 전체가 흔들리는 것처럼 보였다.
빛은 일정하지 않고 깜빡이며, 어딘가 급박한 상황을 암시했다.
당신의 주변 공기가 묘하게 무력해졌다.
바람 한 줄기 없는데 옷자락이 흔들리고,
멀리 있던 사물의 윤곽이 일시적으로 흐려졌다.

아티팩트는 폭주하는 듯 보였지만,
어째서인지 당신에게 직접적인 위협을 가하지는 않았다.

오히려 “문을 열 준비를 하고 있다”는 느낌에 가까웠다.
수첩은 문양 중심을 세 번 깜빡이며, 다음 페이지로 넘어갈 준비를 했다.

당신은 호흡을 가다듬었다.
지금이 바로 중대한 경계라는 걸 알 수 있었으니까.

당신은 파동이 가장 짙게 느껴지는 곳으로 걸어갔다.

(바닥에 부착된 QR코드를 찍어 확인해주세요.)`,
        answer: "피암터널",
        hint: "한글, 공사준공표지판을 잘 살펴보세요."
      },
      // ----------------------------------------------------
      // ⭐ STAGE 16 (인덱스 15): 14장, 감응자의 진실
      // ----------------------------------------------------
      {
        subtitle: "14장, 감응자의 진실",
        text: `열다섯 번째 페이지가 펼쳐지는 순간
이전까지 가려져 있던 문장들이 선명해졌다.

'감응자는 오랜 세월 우리의 세계를 지탱해왔다.
그들은 반복적으로 이곳으로 편입되었다.
이 수첩은 새로운 감응자를 찾기 위한 장치다.'

당신의 눈빛이 흔들렸다.
감응자는 특별한 재능을 가진 존재가 아니었다.
세계를 유지하기 위한 장치의 일부,
혹은 의식을 수행하는 도구에 가까웠다.

지난 연구 기록에서 발견된
'감응자 실종 사례'들이 불현듯 떠올랐다.

아무도 그 이유를 밝히지 못한 채
기록만 남아 있던 이름들.
그들은 실종된 것이 아니라 ‘편입’된 것이었다.
아티팩트가 불안정하게 울렸다.

당신은 손을 떨며 페이지를 덮었다.
이제 자신이 어떤 역할을 맡게 될지
어렴풋이 이해하기 시작했다.`,
        answer: "13",
        hint: "숫자만, 직접 포즈를 취해보시는 건 어떠신가요?"
      },
      // ----------------------------------------------------
      // ⭐ STAGE 17 (인덱스 16): 15장. 두 번째 반전
      // ----------------------------------------------------
      {
        subtitle: "15장. 두 번째 반전 — 당신은 처음이 아니다",
        text: `열여섯 번째 페이지는
아무런 문양도 없이 새하얀 종이였다.
그러나 연구원이 손을 올리자
검은 글씨가 한 줄씩 떠올랐다.
<이 글을 읽고 있다면—
너는 처음이 아니다.>
그 문장이 완성되는 순간
공기의 온도가 순간적으로 떨어졌다.
수첩은 계속해서 글씨를 드러냈다.
<우리는 이전 감응자들을 맞이했고,
그들은 모두 제 역할을 수행했다.
이 기록은 반복을 위한 것이다.>
반복.
그 한 단어가 연구원의 뒷덜미를 서늘하게 만들었다.
지금 그가 느끼는 모든 흐름,
경로, 문양, 공명, 아티팩트의 반응,
이 모든 것이 ‘이미 누군가 지나간 길’이었다.
그는 자신도 결국
그 반복 과정의 일부가 될 것이라는 직감을 피할 수 없었다.
수첩은 종이를 찢듯 급히 다음 장으로 넘어갔다.
어쩌면 이제 더 숨길 이유가 없다는 듯이.`,
        answer: "강촌로56",
        hint: "주소, 띄어쓰기 없이."
      },
      // ----------------------------------------------------
      // ⭐ STAGE 18 (인덱스 17): 16장. 동기화의 완성
      // ----------------------------------------------------
      {
        subtitle: "16장. 동기화의 완성",
        text: `열일곱 번째 장에서는
문양이 종이 전체를 뒤덮었다.
그 복잡한 패턴들이 하나의 흐름을 이루며
아티팩트의 떨림과 완전히 맞물렸다.
이제 아티팩트는
연구원의 심장 박동과 거의 동일한 리듬으로 울렸다.
파동은 손목을 넘어 어깨, 머리까지 퍼져
온몸이 하나의 회로가 된 듯한 느낌.
연구원은 마치 깊은 물속에 들어간 듯한
묘한 안정감과 이질감을 동시에 느꼈다.
자신이 지금 어디까지 흘러온 건지
순간적으로 잊어버릴 만큼 깊은 동기화였다.
수첩의 문양은 마침내 하나의 도형으로 합쳐지기 시작했다.
이는 마치 ‘문’을 여는 완성된 열쇠처럼 보였다.
아티팩트는 강하게 한 번 울림을 냈다.
연구원의 복부 깊은 곳에서
무언가가 붙잡히는 듯한,
끌려가는 듯한 감각이 일었다.`,
        answer: "물안개 살포시 고개드는 강촌",
        hint: "한글, 카페 안쪽에 위치하고 있습니다."
      },
      // ----------------------------------------------------
      // ⭐ STAGE 19 (인덱스 18): 17장. 신성생명체의 잔상
      // ----------------------------------------------------
      {
        subtitle: "최종 클리어", 
        text: `모든 미션을 완수했습니다!`, 
        answer: "code20", 
        hint: "정답을 입력하세요."
      }
    ];

       const totalStages = puzzles.length;
    let currentStage = 0;

    const stageLabelEl    = document.getElementById("stageLabel");
    const stageSubtitleEl = document.getElementById("stageSubtitle");
    const storyTextEl     = document.getElementById("storyText");
    const messageEl       = document.getElementById("message");
    const hintAreaEl      = document.getElementById("hintArea");
    const hintContentEl   = document.getElementById("hintContent");
    const answerInputEl   = document.getElementById("answer");
    const submitBtnEl     = document.getElementById("submitBtn");
    const progressBarEl   = document.getElementById("progressBar");
    const progressTextEl  = document.getElementById("progressText");
    const answerAreaEl    = document.getElementById("answerArea");
    const clearBlockEl    = document.getElementById("clearBlock");
    const restartBtnEl    = document.getElementById("restartBtn");

    function normalize(text) {
      return text.trim().replace(/\s/g, '').toLowerCase();
    }

    function updateProgress() {
      const cleared = currentStage;
      const total = totalStages;
      
      stageLabelEl.textContent     = `STAGE ${currentStage + 1} / ${total}`;
    }

    function renderStage() {
      const p = puzzles[currentStage];

      stageSubtitleEl.textContent = p.subtitle || "현장 로그를 읽고 코드를 입력하세요.";
      storyTextEl.innerHTML       = p.text || "";
      messageEl.textContent       = "";
      messageEl.className         = "message";

      answerInputEl.value    = "";
      answerInputEl.disabled = false;
      submitBtnEl.disabled   = false;
      answerAreaEl.style.display = "block";
      clearBlockEl.style.display = "none";
      
      // 힌트 내용 업데이트 및 강조 설정
      hintContentEl.textContent = p.hint || "제공된 힌트가 없습니다.";
      
      // 프롤로그(인덱스 0, 1)만 힌트 강조 스타일 적용
      if (currentStage === 0 || currentStage === 1) {
          hintAreaEl.classList.add("active");
      } else {
          hintAreaEl.classList.remove("active");
      }

      // details 태그가 힌트 내용이 바뀔 때 자동으로 닫히도록 설정
      const hintDetails = hintAreaEl.querySelector('details');
      if (hintDetails) hintDetails.removeAttribute('open');
      

      updateProgress();
      answerInputEl.focus();
      
      // 자동 스크롤 추가
      window.scrollTo(0, 0); 
    }

    function showClear() {
      stageLabelEl.textContent    = `GAME CLEARED`;
      answerAreaEl.style.display  = "none";
      clearBlockEl.style.display  = "block";
    }

    function checkAnswer() {
      const userAnswer = normalize(answerInputEl.value);
      const correct    = normalize(puzzles[currentStage].answer || "");

      if (!userAnswer) {
        messageEl.textContent = "정답(코드)을 입력해 주세요.";
        messageEl.className   = "message error";
        return;
      }

      if (userAnswer === correct) {
        messageEl.textContent = "✅ 정답입니다! 다음 장으로 이동합니다.";
        messageEl.className   = "message success";

        submitBtnEl.disabled   = true;
        answerInputEl.disabled = true;
        submitBtnEl.textContent = "✔ NEXT LOADING...";

        setTimeout(() => {
          submitBtnEl.textContent = "SUBMIT";
          if (currentStage >= totalStages - 1) {
            showClear();
          } else {
            currentStage += 1;
            renderStage();
          }
        }, 900);
      } else {
        messageEl.textContent = "❌ 코드가 일치하지 않습니다. 다시 확인해 보세요.";
        messageEl.className   = "message error";
      }
    }

    submitBtnEl.addEventListener("click", checkAnswer);
    answerInputEl.addEventListener("keydown", (e) => {
      if (e.key === "Enter") checkAnswer();
    });

    if (restartBtnEl) {
      restartBtnEl.addEventListener("click", () => {
        currentStage = 0;
        renderStage();
      });
    }

    renderStage();
  </script>
</body>
</html>
