<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>Backwoods Field Notebook - Mobile Full</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>
    :root {
      --bg-gray: #111827;
      --paper: #faf7f2;
      --line: #e2ddd4;
      --margin-line: #c4a58c;
      --text-main: #222222;
      --text-sub: #6b7280;
      --accent: #111111;
      --accent-blue: #2563eb;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      min-height: 100vh;
      background: var(--bg-gray);
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    .notebook-card {
      width: 100%;
      max-width: 600px;
      margin: 0 auto;
      min-height: 100vh;
      background: #020617;
      display: flex;
      flex-direction: column;
    }

    .spiral-header {
      padding: 12px 16px 8px;
      background: linear-gradient(135deg, #020617, #111827);
      color: #e5e7eb;
      box-shadow: 0 2px 6px rgba(0,0,0,0.5);
    }

    .spiral-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 6px;
    }

    .spiral-holes {
      display: flex;
      gap: 6px;
    }

    .spiral-hole {
      width: 13px;
      height: 13px;
      border-radius: 999px;
      background: #020617;
      box-shadow:
        0 0 0 2px #d4d4d4,
        inset 0 0 3px rgba(0,0,0,0.9);
      position: relative;
    }

    .spiral-wire {
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      width: 19px;
      height: 3px;
      border-radius: 999px;
      background: #d4d4d4;
      box-shadow:
        0 2px 0 rgba(0,0,0,0.4),
        0 -1px 0 rgba(255,255,255,0.7);
    }

    .spiral-wire.top { top: -6px; }
    .spiral-wire.bottom { bottom: -6px; }

    .lab-header-text {
      text-align: right;
      font-size: 0.72rem;
      letter-spacing: 0.16em;
      text-transform: uppercase;
      color: #9ca3af;
    }

    .lab-main-title {
      margin-top: 4px;
      font-size: 1rem;
      font-weight: 600;
      letter-spacing: 0.18em;
      text-transform: uppercase;
    }

    .lab-subtitle {
      margin-top: 2px;
      font-size: 0.76rem;
      letter-spacing: 0.22em;
      text-transform: uppercase;
      color: #d1d5db;
    }

    .paper-wrap {
      flex: 1;
      background: #111827;
      padding: 10px 10px 16px;
      overflow-y: auto;
    }

    .paper {
      position: relative;
      border-radius: 14px;
      background:
        repeating-linear-gradient(
          to bottom,
          var(--paper) 0,
          var(--paper) 24px,
          var(--line) 25px
        );
      box-shadow:
        0 8px 18px rgba(0,0,0,0.45),
        0 0 0 1px rgba(0,0,0,0.25);
      padding: 12px 14px 14px 40px;
      min-height: calc(100vh - 110px);
    }

    .paper::before {
      content: "";
      position: absolute;
      top: 0;
      bottom: 0;
      left: 28px;
      width: 2px;
      background: linear-gradient(to bottom, transparent, var(--margin-line), transparent);
      opacity: 0.9;
    }

    .paper-header {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      margin-bottom: 6px;
    }

    .paper-header-left {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .paper-label {
      font-size: 0.76rem;
      color: var(--text-sub);
      letter-spacing: 0.16em;
      text-transform: uppercase;
    }

    .paper-title {
      font-size: 0.98rem;
      font-weight: 600;
      color: var(--text-main);
    }

    .paper-header-right {
      text-align: right;
      font-size: 0.72rem;
      color: var(--text-sub);
    }

    .stage-pill {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 2px 8px;
      border-radius: 999px;
      border: 1px solid #c4b5a5;
      font-size: 0.72rem;
      background: rgba(250, 247, 242, 0.95);
      color: var(--text-sub);
      text-transform: uppercase;
      letter-spacing: 0.14em;
    }

    .progress-wrap {
      margin: 4px 0 4px;
    }

    .progress-bar-bg {
      width: 100%;
      height: 4px;
      border-radius: 999px;
      background: rgba(0,0,0,0.06);
      overflow: hidden;
    }

    .progress-bar-fill {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, var(--accent-blue), #111827);
      transition: width 0.3s ease;
    }

    .progress-text {
      margin-top: 3px;
      font-size: 0.72rem;
      color: var(--text-sub);
      text-align: right;
    }

    .subtitle {
      font-size: 0.86rem;
      color: var(--text-sub);
      margin: 4px 0 6px;
    }

    .story-text {
      font-size: 0.95rem;
      color: var(--text-main);
      white-space: pre-line;
      line-height: 1.7;
      margin-bottom: 10px;
    }

    label {
      display: block;
      font-size: 0.86rem;
      color: var(--text-main);
      margin-bottom: 4px;
      margin-top: 4px;
    }

    input[type="text"] {
      width: 100%;
      padding: 8px 10px;
      border-radius: 8px;
      border: 1px solid #c4b5a5;
      font-size: 0.95rem;
      font-family: inherit;
      background: rgba(255,255,255,0.98);
      color: var(--text-main);
    }

    input[type="text"]:focus {
      outline: none;
      border-color: var(--accent-blue);
      box-shadow: 0 0 0 1px rgba(37, 99, 235, 0.5);
      background: #ffffff;
    }

    button {
      width: 100%;
      margin-top: 8px;
      padding: 9px 10px;
      border-radius: 999px;
      border: none;
      background: var(--accent);
      color: #ffffff;
      font-size: 0.82rem;
      font-weight: 600;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      cursor: pointer;
      box-shadow: 0 7px 16px rgba(0,0,0,0.35);
      transition: transform 0.05s ease, filter 0.06s ease, box-shadow 0.1s ease;
    }

    button:active {
      transform: translateY(1px);
      filter: brightness(0.93);
      box-shadow: 0 4px 9px rgba(0,0,0,0.4);
    }

    button:disabled {
      opacity: 0.5;
      cursor: default;
      box-shadow: none;
    }

    .message {
      margin-top: 4px;
      font-size: 0.82rem;
      min-height: 1.2em;
    }

    .message.error { color: #c62828; }
    .message.success { color: #2e7d32; }

    .hint {
      margin-top: 4px;
      font-size: 0.8rem;
      color: var(--text-sub);
    }

    .clear-block {
      margin-top: 12px;
      font-size: 0.9rem;
      color: var(--text-main);
      display: none;
    }

    .clear-badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 2px 8px;
      border-radius: 999px;
      border: 1px solid #2e7d32;
      color: #2e7d32;
      font-size: 0.74rem;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      background: rgba(222, 247, 222, 0.9);
      margin-bottom: 4px;
    }

    .clear-title {
      font-weight: 600;
      margin-bottom: 4px;
    }

    .clear-text {
      font-size: 0.88rem;
      color: var(--text-sub);
      line-height: 1.6;
    }

    .restart-btn {
      margin-top: 10px;
      width: 100%;
      padding: 8px 10px;
      border-radius: 999px;
      border: 1px solid #111827;
      background: transparent;
      color: #111827;
      font-size: 0.8rem;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      cursor: pointer;
    }

    .restart-btn:active {
      transform: translateY(1px);
      filter: brightness(0.96);
    }
  </style>
</head>
<body>
  <div class="notebook-card">
    <div class="spiral-header">
      <div class="spiral-row">
        <div class="spiral-holes">
          <div class="spiral-hole">
            <div class="spiral-wire top"></div>
            <div class="spiral-wire bottom"></div>
          </div>
          <div class="spiral-hole">
            <div class="spiral-wire top"></div>
            <div class="spiral-wire bottom"></div>
          </div>
          <div class="spiral-hole">
            <div class="spiral-wire top"></div>
            <div class="spiral-wire bottom"></div>
          </div>
        </div>
        <div class="lab-header-text">
          BACKWOODS RESEARCH INSTITUTE
        </div>
      </div>
      <div class="lab-main-title">EGG FIELD LOG</div>
      <div class="lab-subtitle">GANGCHON BASE</div>
    </div>

    <div class="paper-wrap">
      <div class="paper">
        <div class="paper-header">
          <div class="paper-header-left">
            <div class="paper-label">FIELD NOTES</div>
            <div class="paper-title">
              ì‚°ê³¨ë²„ë ¤ì§„ ê³„ë€ì—°êµ¬ì†Œ â€” í•„ë“œ ë¡œê·¸
            </div>
          </div>
          <div class="paper-header-right">
            <div class="stage-pill" id="stageLabel">
              STAGE 1 / 5
            </div>
            <div id="progressText">0 / 5 CLEARED</div>
          </div>
        </div>

        <div class="progress-wrap">
          <div class="progress-bar-bg">
            <div class="progress-bar-fill" id="progressBar"></div>
          </div>
        </div>

        <div class="subtitle" id="stageSubtitle">
          íŒíŠ¸ë¥¼ ì½ê³  í˜„ì¥ì—ì„œ ì–»ì€ ì½”ë“œë¥¼ ì…ë ¥í•˜ì„¸ìš”.
        </div>
        <div class="story-text" id="storyText">
          ìŠ¤í…Œì´ì§€ ë‚´ìš©ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.
        </div>

        <div id="answerArea">
          <label for="answer">CODE / ì•”í˜¸</label>
          <input id="answer" type="text" autocomplete="off" />
          <button id="submitBtn">SUBMIT</button>
          <div id="message" class="message"></div>
          <div id="hint" class="hint"></div>
        </div>

        <div class="clear-block" id="clearBlock">
          <div class="clear-badge">
            <span>ğŸ‰</span><span>ALL STAGES CLEARED</span>
          </div>
          <div class="clear-title">í•„ë“œ ë¡œê·¸ ì‘ì„± ì™„ë£Œ</div>
          <div class="clear-text">
            ëª¨ë“  ìŠ¤í…Œì´ì§€ì—ì„œ ìˆ˜ì§‘í•œ ì½”ë“œê°€ ê¸°ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.<br />
            ì´ ë…¸íŠ¸ë¥¼ ë“¤ê³  ì§„í–‰ìë¥¼ ì°¾ì•„ê°€ ë‹¤ìŒ ì§€ë ¹ì„ ë°›ìœ¼ì„¸ìš”.
          </div>
          <button class="restart-btn" id="restartBtn">
            RESTART FROM STAGE 1
          </button>
        </div>
      </div>
    </div>
  </div>

  <script>
    const puzzles = [
      {
        subtitle: "í”„ë¡¤ë¡œê·¸ â€” ê³ ëŒ€ ìƒëª…ì²´ê°€ ì‚¬ë¼ì§„ ì‹œëŒ€",
        text: `ê³ ëŒ€ ìƒëª…ì²´ê°€ ì‚¬ë¼ì§„ ì‹œëŒ€
ì•„ì£¼ ì˜¤ë˜ì „, ê°•ì´Œ ì¸ê·¼ì—ëŠ” ì§€ê¸ˆì€ ê¸°ë¡ì—ì„œ ì‚¬ë¼ì§„ ê±°ëŒ€ ë¹„í–‰ ìƒëª…ì²´ê°€ ì¡´ì¬í–ˆë‹¤ëŠ” ì „ì„¤ë§Œ íë¦¿í•˜ê²Œ ë‚¨ì•„ ìˆë‹¤. í˜„ëŒ€ ê³¼í•™ìœ¼ë¡œëŠ” ì •ì²´ë¥¼ ì•Œ ìˆ˜ ì—†ëŠ” ìƒëª…ì²´ì˜€ê³ , ì–´ëŠ ìˆœê°„ í”ì  ì—†ì´ ì‚¬ë¼ì¡Œë‹¤. ì´ ì „ì„¤ì€ ì‚¬ì‹¤ ì—¬ë¶€ë„ ë¶ˆë¶„ëª…í•œ ì±„ ì§€ì—­ì˜ ì‹ í™”ì²˜ëŸ¼ë§Œ ì „í•´ì§„ë‹¤.

í˜„ëŒ€ì˜ ì´ìƒ í˜„ìƒ â€“ ê°ì‘ìì˜ ë“±ì¥
ìµœê·¼ ê°•ì´Œ ì¼ëŒ€ì—ì„œ 'ì •ì²´ë¶ˆëª…ì˜ ì—ë„ˆì§€ ê³µì§„(Resonance)'ì´ ê¸‰ê²©íˆ ì¦ê°€í•œë‹¤. ë ˆì´ë”ì—ëŠ” ì£¼ê¸°ì ìœ¼ë¡œ ì‹ í˜¸ê°€ ì°íˆì§€ë§Œ ê¸°ì¡´ ì¥ë¹„ë¡œëŠ” ë¶„ì„ë˜ì§€ ì•ŠëŠ”ë‹¤. ê·¸ëŸ¬ë˜ ì¤‘, ì´ ì‹ í˜¸ê°€ ê·¹ì†Œìˆ˜ì˜ ì¸ê°„ì—ê²Œë§Œ ê°ê°ì  ìê·¹ì„ ì£¼ëŠ” ê²ƒì´ ë°œê²¬ëœë‹¤. ê·¸ë“¤ì€ ê°ì‘ì(Sensor)ë¼ ë¶ˆë¦°ë‹¤. 

ì¤‘ì‹¬ì— ë†“ì¸ ë¬¼ì²´ â€“ ë¶€í™”ê°€ ì•„ë‹Œ â€˜ê°ì„±â€™
ê°•ì´Œ ì‚°ì† íŠ¹ì • ì§€ì ì—ì„œ ì•Œì²˜ëŸ¼ ìƒê¸´ ë™ê·¸ë€ ê²°ì •ì²´(Artifact)ê°€ ë°œê²¬ëœë‹¤. ë”°ëœ»í•˜ì§€ë„ ì°¨ê°‘ì§€ë„ ì•Šì€ ì´ ë¬¼ì²´ëŠ” ìƒì²´ ë°˜ì‘ë„, ê¸°ê³„ ë°˜ì‘ë„ ì•„ë‹Œ ë…íŠ¹í•œ íŒŒë™ì„ ë‚´ê³  ìˆë‹¤. ë‹¹ì´ˆ í•™ìë“¤ì€ ìƒëª…ì²´ì˜ ì•Œì´ë¼ê³  ì¶”ì¸¡í–ˆìœ¼ë‚˜, ì´í›„ ë¶„ì„ ê²°ê³¼ â†’ â€˜ìƒëª…ì²´ì  ì‹ í˜¸â€™ì™€ â€˜ì§€ì„±ì  íŒ¨í„´â€™ì´ ë™ì‹œì— ì¡´ì¬í•˜ëŠ”, ì •ì²´ë¶ˆëª…ì˜ ìœ ë¬¼ì´ë¼ëŠ” ê²°ë¡ ì´ ë‚´ë ¤ì§„ë‹¤.

ì´ì œ, ê°ì‘ì ì¤‘ í•œ ëª…ìœ¼ë¡œì„œ ë‹¹ì‹ ì€ í˜„ì¥ìœ¼ë¡œ íŒŒê²¬ëœë‹¤.
í”„ë¡¤ë¡œê·¸ë¥¼ ëª¨ë‘ ì½ì—ˆë‹¤ë©´, ì•„ë˜ ì •ë‹µ ì¹¸ì— 'ì‹œì‘'ì„ ì…ë ¥í•´ 1ì¥ìœ¼ë¡œ ì§„í–‰í•˜ì„¸ìš”.`,
        answer: "ì‹œì‘",
        hint: "í”„ë¡¤ë¡œê·¸ë¥¼ ëª¨ë‘ ì½ì—ˆë‹¤ë©´ ì •ë‹µ ì¹¸ì— 'ì‹œì‘'ì´ë¼ê³  ì…ë ¥í•´ ì£¼ì„¸ìš”."
      },
      {
        subtitle: "2ì¥. ì”ì¬íŒŒë™ì´ ê¹¨ì–´ë‚˜ë‹¤",
        text: `ì—¬ê¸°ì— ì‹œë‚˜ë¦¬ì˜¤ PDF 2í˜ì´ì§€ ë‚´ìš©ì„ ê·¸ëŒ€ë¡œ ë¶™ì—¬ë„£ê¸°

â€» í˜„ì¥ì—ì„œ ì–»ì€ ì½”ë“œë¥¼ ì…ë ¥í•˜ì„¸ìš”.`,
        answer: "code2",
        hint: "í˜„ì¥ì—ì„œ ì–»ì€ ì½”ë“œ 2ë¥¼ ì…ë ¥í•˜ì„¸ìš”."
      },
      {
        subtitle: "3ì¥. ì²«ë¬¸ì–‘ì´ ê¹¨ì–´ë‚œ ìˆœê°„",
        text: `ì—¬ê¸°ì— ì‹œë‚˜ë¦¬ì˜¤ PDF 3í˜ì´ì§€ ë‚´ìš©ì„ ê·¸ëŒ€ë¡œ ë¶™ì—¬ë„£ê¸°

â€» í˜„ì¥ì—ì„œ ì–»ì€ ì½”ë“œë¥¼ ì…ë ¥í•˜ì„¸ìš”.`,
        answer: "code3",
        hint: "í˜„ì¥ì—ì„œ ì–»ì€ ì½”ë“œ 3ì„ ì…ë ¥í•˜ì„¸ìš”."
      },
      {
        subtitle: "4ì¥. ê³µì§„ì˜ ì²«í­ë°œ",
        text: `ì—¬ê¸°ì— ì‹œë‚˜ë¦¬ì˜¤ PDF 4í˜ì´ì§€ ë‚´ìš©ì„ ê·¸ëŒ€ë¡œ ë¶™ì—¬ë„£ê¸°

â€» í˜„ì¥ì—ì„œ ì–»ì€ ì½”ë“œë¥¼ ì…ë ¥í•˜ì„¸ìš”.`,
        answer: "code4",
        hint: "í˜„ì¥ì—ì„œ ì–»ì€ ì½”ë“œ 4ë¥¼ ì…ë ¥í•˜ì„¸ìš”."
      },
      {
        subtitle: "5ì¥. ê³ ëŒ€ìƒëª…ì²´ì˜ ì”ì¬í”ì  / 6ì¥. ë¬¸ì–‘ì–¸ì–´ì˜ ë“±ì¥",
        text: `ì—¬ê¸°ì— ì‹œë‚˜ë¦¬ì˜¤ PDF 5í˜ì´ì§€ ë‚´ìš©ì„ ê·¸ëŒ€ë¡œ ë¶™ì—¬ë„£ê¸°

â€» í˜„ì¥ì—ì„œ ì–»ì€ ì½”ë“œë¥¼ ì…ë ¥í•˜ì„¸ìš”.`,
        answer: "code5",
        hint: "í˜„ì¥ì—ì„œ ì–»ì€ ì½”ë“œ 5ë¥¼ ì…ë ¥í•˜ì„¸ìš”."
      }
    ];

    const totalStages = puzzles.length;
    let currentStage = 0;

    const stageLabelEl    = document.getElementById("stageLabel");
    const stageSubtitleEl = document.getElementById("stageSubtitle");
    const storyTextEl     = document.getElementById("storyText");
    const messageEl       = document.getElementById("message");
    const hintEl          = document.getElementById("hint");
    const answerInputEl   = document.getElementById("answer");
    const submitBtnEl     = document.getElementById("submitBtn");
    const progressBarEl   = document.getElementById("progressBar");
    const progressTextEl  = document.getElementById("progressText");
    const answerAreaEl    = document.getElementById("answerArea");
    const clearBlockEl    = document.getElementById("clearBlock");
    const restartBtnEl    = document.getElementById("restartBtn");

    function normalize(text) {
      return text.trim().toLowerCase();
    }

    function updateProgress() {
      const cleared = currentStage;
      const percent = (cleared / totalStages) * 100;
      progressBarEl.style.width    = percent + "%";
      progressTextEl.textContent   = `${cleared} / ${totalStages} CLEARED`;
      stageLabelEl.textContent     = `STAGE ${currentStage + 1} / ${totalStages}`;
    }

    function renderStage() {
      const p = puzzles[currentStage];

      stageSubtitleEl.textContent = p.subtitle || "í˜„ì¥ ë¡œê·¸ë¥¼ ì½ê³  ì½”ë“œë¥¼ ì…ë ¥í•˜ì„¸ìš”.";
      storyTextEl.textContent     = p.text || "";
      hintEl.textContent          = p.hint || "";
      messageEl.textContent       = "";
      messageEl.className         = "message";

      answerInputEl.value    = "";
      answerInputEl.disabled = false;
      submitBtnEl.disabled   = false;
      answerAreaEl.style.display = "block";
      clearBlockEl.style.display = "none";

      updateProgress();
      answerInputEl.focus();
    }

    function showClear() {
      progressBarEl.style.width   = "100%";
      progressTextEl.textContent  = `${totalStages} / ${totalStages} CLEARED`;
      stageLabelEl.textContent    = `STAGE ${totalStages} / ${totalStages}`;
      answerAreaEl.style.display  = "none";
      clearBlockEl.style.display  = "block";
    }

    function checkAnswer() {
      const userAnswer = normalize(answerInputEl.value);
      const correct    = normalize(puzzles[currentStage].answer || "");

      if (!userAnswer) {
        messageEl.textContent = "ì •ë‹µ(ì½”ë“œ)ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”.";
        messageEl.className   = "message error";
        return;
      }

      if (userAnswer === correct) {
        messageEl.textContent = "ê¸°ë¡ ì™„ë£Œ. ë‹¤ìŒ ì¥ìœ¼ë¡œ ë„˜ì–´ê°‘ë‹ˆë‹¤.";
        messageEl.className   = "message success";

        submitBtnEl.disabled   = true;
        answerInputEl.disabled = true;

        setTimeout(() => {
          if (currentStage >= totalStages - 1) {
            showClear();
          } else {
            currentStage += 1;
            renderStage();
          }
        }, 900);
      } else {
        messageEl.textContent = "ì½”ë“œê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. í˜„ì¥ ê¸°ë¡ì„ ë‹¤ì‹œ í™•ì¸í•´ ë³´ì„¸ìš”.";
        messageEl.className   = "message error";
      }
    }

    submitBtnEl.addEventListener("click", checkAnswer);
    answerInputEl.addEventListener("keydown", (e) => {
      if (e.key === "Enter") checkAnswer();
    });

    if (restartBtnEl) {
      restartBtnEl.addEventListener("click", () => {
        currentStage = 0;
        renderStage();
      });
    }

    renderStage();
  </script>
</body>
</html>
